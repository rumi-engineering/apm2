{
  "schema": "apm2.agents_context.v1",
  "module": "crates/apm2-core/src/ticket_emitter",
  "behaviors": [
    {
      "id": "BEH-CORE-TCKEMIT-001",
      "kind": "safety",
      "title": "PathTraversalError for RFC ID not matching RFC-NNNN or ticket ID not matching TCK-NNNNN",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-002",
      "kind": "safety",
      "title": "FileTooLarge enforces 10 MB maximum on input files to prevent denial-of-service",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-003",
      "kind": "invariant",
      "title": "Ticket id always matches the pattern TCK-NNNNN (5 digits, validated at parse time)",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-004",
      "kind": "invariant",
      "title": "test_requirements is never empty; defaults are generated if decomposition provides none",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-005",
      "kind": "invariant",
      "title": "yaml_content is canonicalized YAML produced by determinism::canonicalize_yaml",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-006",
      "kind": "invariant",
      "title": "depends_on references resolved to stable ticket IDs from the same decomposition",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-007",
      "kind": "safety",
      "title": "Validation errors are aggregated not early-returned; all paths checked before reporting",
      "rfc": ["RFC-0019"]
    },
    {
      "id": "BEH-CORE-TCKEMIT-008",
      "kind": "safety",
      "title": "Path traversal (..) and absolute paths are always rejected regardless of CCP availability",
      "rfc": ["RFC-0019"]
    }
  ]
}
