public_api_inventory:
  schema_version: "2026-01-26"
  generated_at: "2026-01-26T00:00:00Z"

  cli_commands:
    - path: "apm2 factory run"
      implementation: crates/apm2-cli/src/commands/factory.rs
      description: "Run an agent task from a spec file"
      extension_point: "Add new factory subcommands in FactoryCommands enum"

    - path: "apm2 daemon"
      implementation: crates/apm2-cli/src/commands/daemon.rs
      description: "Start the daemon"

    - path: "apm2 creds *"
      implementation: crates/apm2-cli/src/commands/creds.rs
      description: "Credential management subcommands"

  traits:
    - name: Holon
      path: crates/apm2-holon/src/traits.rs
      methods:
        - intake(input, lease_id) -> Result<()>
        - execute_episode(ctx) -> Result<EpisodeResult>
        - emit_artifact(artifact) -> Result<()>
        - escalate(reason) -> Result<()>
        - should_stop(ctx) -> StopCondition
        - state() -> &State

    - name: Adapter
      path: crates/apm2-core/src/adapter/traits.rs
      methods:
        - start() -> Result<()>
        - stop() -> Result<()>
        - poll() -> Result<Option<AdapterEvent>>
        - pid() -> Option<u32>

    - name: Reducer
      path: crates/apm2-core/src/reducer/traits.rs
      description: "Event sourcing reducer pattern"

  key_types:
    - name: EpisodeContext
      path: crates/apm2-holon/src/context.rs
      description: "Context for a single episode of holon execution"

    - name: Budget
      path: crates/apm2-holon/src/resource/budget.rs
      description: "Multi-dimensional resource limits with monotonic depletion"

    - name: Lease
      path: crates/apm2-holon/src/resource/lease.rs
      description: "Time-bounded, scoped authorization for a holon to perform work"

    - name: LeaseScope
      path: crates/apm2-holon/src/resource/scope.rs
      description: "Authority boundaries for lease operations"

    - name: WorkObject
      path: crates/apm2-holon/src/work.rs
      description: "Work unit with lifecycle state machine"

    - name: Artifact
      path: crates/apm2-holon/src/artifact.rs
      description: "Evidence produced during holon execution"

    - name: SkillFrontmatter
      path: crates/apm2-holon/src/skill.rs
      description: "Parsed YAML content from skill markdown files"

    - name: HolonConfig
      path: crates/apm2-holon/src/skill.rs
      description: "Configuration for a skill operating as a holon"

  ipc_types:
    - name: IpcRequest
      path: crates/apm2-core/src/ipc/mod.rs
      variants: [Ping, Status, ListProcesses, GetProcess, StartProcess, StopProcess, RestartProcess, Shutdown]

    - name: IpcResponse
      path: crates/apm2-core/src/ipc/mod.rs
      variants: [Ok, Error, Pong, Status, ProcessList, ProcessDetails]

  event_types:
    - name: AdapterEvent
      path: crates/apm2-core/src/adapter/event.rs
      payloads: [ProcessStarted, Progress, ToolRequestDetected, StallDetected, ProcessExited, Diagnostic]

    - name: LedgerEvent
      path: crates/apm2-core/src/ledger/mod.rs
      description: "Append-only ledger events"
