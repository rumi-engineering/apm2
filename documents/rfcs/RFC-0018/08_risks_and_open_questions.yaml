rfc_risks_and_open_questions:
  schema_version: "2026-02-01"
  template_version: "2026-01-23"
  risks:
    - id: "RSK-HEF-0001"
      statement: "Missing truth-plane events for episode lifecycle/tool/io and defect records prevent required Phase-1 topics from being emitted."
      impact: "HEF topics would be partial; consumers forced back to polling."
      likelihood: "HIGH"
      mitigations:
        - "TCK-00306 adds episode lifecycle/tool/io events to kernel_events.proto."
        - "TCK-00307 adds DefectRecorded ledger event."
      evidence_ids:
        - "EVID-HEF-0006"
    - id: "RSK-HEF-0002"
      statement: "Pulse hints could be misused as authoritative admission signals."
      impact: "Admission bypass or spoofed gate outcomes."
      likelihood: "MEDIUM"
      mitigations:
        - "REQ-HEF-0001 forbids authoritative use; red-team tests enforce fail-closed."
        - "DD-HEF-0001 + DD-HEF-0008 explicitly prohibit pulse-only decisions."
      evidence_ids:
        - "EVID-HEF-0001"
    - id: "RSK-HEF-0003"
      statement: "Pulse fanout may introduce DoS risk to daemon (queue growth, CPU)."
      impact: "Control-plane degradation or outage."
      likelihood: "MEDIUM"
      mitigations:
        - "REQ-HEF-0004 caps queues, rates, and in-flight bytes."
        - "Drop policy prioritizes critical topics."
      evidence_ids:
        - "EVID-HEF-0007"
    - id: "RSK-HEF-0004"
      statement: "Legacy bypass surfaces (xtask GitHub status writes) may be mistakenly treated as truth."
      impact: "Projection-only posture violated; split-brain admission."
      likelihood: "MEDIUM"
      mitigations:
        - "HEF explicitly forbids using GitHub status or pulses as authority."
        - "TCK-00309 removes or routes direct GitHub status writes through daemon projection logic."
      evidence_ids:
        - "EVID-HEF-0001"
    - id: "RSK-HEF-0005"
      statement: "FAC v0 autonomy preconditions (ChangeSetBundle, ReviewReceipt, ReviewBlocked) may be missing, forcing GitHub reads or stalling reviews."
      impact: "Reviewer liveness fails or authority leaks to external projections."
      likelihood: "HIGH"
      mitigations:
        - "TCK-00310..TCK-00313 implement FAC v0 preconditions and tests."
        - "FAC v0 evidence depends on RFC-0017 tickets TCK-00254, TCK-00256, and TCK-00260 (capability manifest, SpawnEpisode, tool broker)."
        - "GATE-HEF-FAC-V0 blocks enable-by-default until evidence exists."
      evidence_ids:
        - "EVID-HEF-0012"
    - id: "RSK-HEF-0006"
      statement: "Reviewer tool surface mismatch (missing ListFiles/Search) may block autonomous review navigation."
      impact: "Reviewers cannot locate files or verify context; autonomy stalls."
      likelihood: "MEDIUM"
      mitigations:
        - "TCK-00315 adds ListFiles/Search tool surfaces with allowlist enforcement."
      evidence_ids:
        - "EVID-HEF-0011"
  open_questions:
    - id: "Q-HEF-0001"
      question: "Should episode_id be added to existing Session/Tool kernel events, or should new Episode* events be added?"
      decision_needed_by: "2026-02-15"
      resolution_plan: "Prototype both schema options; select minimal-change path that preserves replay determinism."
    - id: "Q-HEF-0002"
      question: "Should DefectRecord be embedded directly in ledger events or stored in CAS with hash reference?"
      decision_needed_by: "2026-02-15"
      resolution_plan: "Compare size and disclosure impact; choose CAS reference if payload risk is high."
    - id: "Q-HEF-0003"
      question: "Do we require a small in-memory pulse replay buffer for short reconnects, or force pure ledger catch-up?"
      decision_needed_by: "2026-02-20"
      resolution_plan: "Define operator UX needs; keep buffer optional and non-authoritative if added."
    - id: "Q-HEF-0004"
      question: "Should ReviewReceiptRecorded be a new kernel event, or should review success be represented via GateReceipt evidence bundles only?"
      decision_needed_by: "2026-02-20"
      resolution_plan: "Compare schema churn vs audit clarity; keep v0 path consistent with FAC receipt semantics."
    - id: "Q-HEF-0005"
      question: "Should changeset_digest remain embedded in ChangeSetBundle (Option A) or move to ledger event only (Option B)?"
      decision_needed_by: "2026-02-22"
      resolution_plan: "Re-evaluate circularity risk vs convenience; keep Option A unless ledger-only digest simplifies validation."
