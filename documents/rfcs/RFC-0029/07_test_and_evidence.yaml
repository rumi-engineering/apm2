rfc_test_and_evidence:
  schema_version: "2026-02-10"

  test_strategy:
    overview: |
      Promotion-critical efficiency claims require power floors, reproducibility
      across at least three hardware/runtime classes, freshness SLAs, and
      throughput-dominance evidence.

      Evidence contracts are fail-closed: stale evidence transitions gates to
      BLOCKED, and optimization-class promotions are blocked until violated
      evidence classes are regenerated and validated.

      Mandatory adversarial queue tests include replay flood with sustained sink
      outage, mixed control+replay bursts, and low-rate defender-cost exhaustion
      attacks.

    layers:
      - layer: "UNIT"
        description: "Predicate-level temporal, queue, and idempotency invariants."
      - layer: "INTEGRATION"
        description: "End-to-end gate/CAC input validation and cross-profile interlock behavior."
      - layer: "ADVERSARIAL"
        description: "Byzantine, partition, outage, and economics-pressure scenarios with fail-closed assertions."
      - layer: "CONFORMANCE"
        description: "Canonical evaluator, canonicalizer tuple compatibility, and cross-verifier determinism checks."
      - layer: "SCALE_STRESS"
        description: "Hardware-tier and cascade-latency stress profiles with p50/p95/p99 obligations."

    quantitative_quality_contracts:
      statistical_power_floors:
        minimum_statistical_power: ">= 0.90"
        maximum_alpha: "<= 0.01"
        sample_size_proof_required: true
        source_section: "12.1"
      reproducibility_matrix:
        minimum_hardware_runtime_classes: 3
        deterministic_replay_required_per_class: true
        divergence_classification_required: true
        root_cause_receipts_required: true
        source_section: "12.2"
      freshness_sla:
        required_schema: "apm2.evidence_freshness_sla.v1"
        stale_gate_state: "BLOCKED"
        promotion_blocked_on_expired_evidence: true
        source_section: "12.3"
      throughput_dominance:
        invariant: "evidence_generation_throughput(c) > evidence_expiry_rate(c) for every promotion-critical evidence class c"
        violation_response:
          - "Enter D1 constrained degrade with prioritized evidence regeneration."
          - "Block optimization-class promotions until dominance is restored."
          - "Escalate to freeze/halt path only if violation persists beyond declared recovery budget."
        source_section: "12.4"

  evidence_artifacts:
    - id: "RFC-0029::EVID-0001"
      title: "Stage cost profile and budget envelope evidence"
      purpose: "Lifecycle-stage cost measurement and economics profile admission traces."
      requirements_covered:
        - "RFC-0029::REQ-0001"

    - id: "RFC-0029::EVID-0002"
      title: "Digest-first selector completeness evidence"
      purpose: "Selector/loss-profile completeness and deterministic replay zoom-in proof."
      requirements_covered:
        - "RFC-0029::REQ-0002"

    - id: "RFC-0029::EVID-0003"
      title: "Verification amortization and cache discipline evidence"
      purpose: "Sub-linear verifier workload proof without correctness regression."
      requirements_covered:
        - "RFC-0029::REQ-0003"

    - id: "RFC-0029::EVID-0004"
      title: "Anti-entropy and queue resilience evidence"
      purpose: "Pull-only queue/backpressure resilience with tick-floor and TP-EIO29-001/002/003 receipts."
      requirements_covered:
        - "RFC-0029::REQ-0004"

    - id: "RFC-0029::EVID-0005"
      title: "Replay/recovery boundedness and dedup evidence"
      purpose: "HTF-window-bounded replay/recovery convergence and dedup/idempotency closure evidence."
      requirements_covered:
        - "RFC-0029::REQ-0005"

    - id: "RFC-0029::EVID-0006"
      title: "Countermetric and interlock gate evidence"
      purpose: "KPI-countermetric completeness and optimization non-regression interlock evidence."
      requirements_covered:
        - "RFC-0029::REQ-0006"

    - id: "RFC-0029::EVID-0007"
      title: "Trade-secret optimization interlock evidence"
      purpose: "Proof that optimization paths preserve disclosure-control posture and deny patent/provisional regressions."
      requirements_covered:
        - "RFC-0029::REQ-0007"

    - id: "RFC-0029::EVID-0008"
      title: "Optimization authority-surface non-regression evidence"
      purpose: "Role capability-surface monotonicity and direct GitHub capability non-regression evidence."
      requirements_covered:
        - "RFC-0029::REQ-0008"

    - id: "RFC-0029::EVID-0009"
      title: "Projection multi-sink outage continuity and replay convergence evidence"
      purpose: "Bounded authoritative continuity under sink outage/churn with replay convergence receipts."
      requirements_covered:
        - "RFC-0029::REQ-0009"

    - id: "RFC-0029::EVID-0010"
      title: "Tiered erasure+BFT reconstruction admissibility evidence"
      purpose: "Reconstruction admissibility closure with erasure decode, quorum cert, digest match, and HTF-bound receipts."
      requirements_covered:
        - "RFC-0029::REQ-0010"

  imported_anchor_evidence:
    - id: "RFC-0027::EVID-0005"
      file: "documents/rfcs/RFC-0027/evidence_artifacts/EVID-0005.yaml"
      role: "Lifecycle closure anchor"
    - id: "RFC-0027::EVID-0007"
      file: "documents/rfcs/RFC-0027/evidence_artifacts/EVID-0007.yaml"
      role: "Temporal-authority and replay-safety anchor"
    - id: "RFC-0027::EVID-0010"
      file: "documents/rfcs/RFC-0027/evidence_artifacts/EVID-0010.yaml"
      role: "Portable reverification anchor"

  test_categories:
    - category: "Stage economics and bounded objective"
      requirement_ids:
        - "RFC-0029::REQ-0001"
      evidence_ids:
        - "RFC-0029::EVID-0001"
      focus: "C_total reduction only when hard constraints remain non-regressed."

    - category: "Digest-first selector completeness"
      requirement_ids:
        - "RFC-0029::REQ-0002"
      evidence_ids:
        - "RFC-0029::EVID-0002"
      focus: "Selector closure completeness, loss-profile declaration, and deterministic zoom-in."

    - category: "Verification amortization"
      requirement_ids:
        - "RFC-0029::REQ-0003"
      evidence_ids:
        - "RFC-0029::EVID-0003"
      focus: "Proof-cache reuse and sub-linear workload growth under correlated workloads."

    - category: "Anti-entropy and queue resilience"
      requirement_ids:
        - "RFC-0029::REQ-0004"
      evidence_ids:
        - "RFC-0029::EVID-0004"
      focus: "Tick-floor, reservation, and anti-starvation invariants under adversarial load."

    - category: "Replay and recovery boundedness"
      requirement_ids:
        - "RFC-0029::REQ-0005"
      evidence_ids:
        - "RFC-0029::EVID-0005"
      focus: "Replay convergence horizons and idempotency monotonicity across partitions and retries."

    - category: "Security interlock and countermetrics"
      requirement_ids:
        - "RFC-0029::REQ-0006"
      evidence_ids:
        - "RFC-0029::EVID-0006"
      focus: "KPI/countermetric completeness and blocked unsafe optimizations."

    - category: "Disclosure and projection-isolation interlocks"
      requirement_ids:
        - "RFC-0029::REQ-0007"
        - "RFC-0029::REQ-0008"
      evidence_ids:
        - "RFC-0029::EVID-0007"
        - "RFC-0029::EVID-0008"
      focus: "Trade-secret posture and authority-surface monotonicity non-regression under optimization pressure."

    - category: "Multi-sink continuity"
      requirement_ids:
        - "RFC-0029::REQ-0009"
      evidence_ids:
        - "RFC-0029::EVID-0009"
      focus: "Outage-window continuity and bounded replay backlog/recovery behavior."

    - category: "Erasure+BFT reconstruction"
      requirement_ids:
        - "RFC-0029::REQ-0010"
      evidence_ids:
        - "RFC-0029::EVID-0010"
      focus: "Decode + quorum + digest-match + temporal-authority admissibility closure."
