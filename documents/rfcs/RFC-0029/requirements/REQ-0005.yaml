requirement:
  schema_version: "2026-02-09"
  id: "REQ-0005"
  title: "Replay/recovery HTF-window bounds and dedup/idempotency closure"
  category: "RELIABILITY"
  priority: "P0"
  status: "PROPOSED"
  statement: |
    Critical external-I/O workflows MUST define bounded replay/recovery envelopes
    via typed HTF window references and ensure cross-cell dedup/idempotency
    semantics prevent redundant authoritative processing.

    Replay and recovery admissibility MUST be represented by HTF-bound receipts:
    `ReplayConvergenceReceiptV1` and `RecoveryAdmissibilityReceiptV1`, each carrying
    `time_authority_ref` and `window_ref`.
    Canonical temporal predicates for this requirement are `TP-EIO29-001`,
    `TP-EIO29-004`, and `TP-EIO29-007`.
  rationale: |
    Recovery cost cliffs and duplicate processing undermine both reliability and economics.
  acceptance_criteria:
    - "Partial-loss rebuild drills remain within declared HTF replay/recovery windows."
    - "Idempotency keys and dedup semantics block duplicate authoritative effects."
    - "Replay correctness is preserved under retry/restart and partition/rejoin."
    - "Replay convergence receipts include signed time authority and verifier replay receipt bindings."
    - "Unknown/invalid/stale temporal receipt fields fail closed."
  imported_dependencies:
    - "RFC-0020::REQ-0004"
    - "RFC-0020::REQ-0034"
    - "RFC-0020::REQ-0035"
    - "RFC-0019::REQ-0010"
    - "RFC-0016::REQ-HTF-0003"
  evidence_ids:
    - "EVID-0005"
