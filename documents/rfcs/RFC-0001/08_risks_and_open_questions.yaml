rfc_risks_and_open_questions:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  risks:
  - id: RSK-RFC-0001
    statement: |
      Syscall mediation may be incomplete or bypassable if adapter boundary
      is not properly enforced, allowing agents to perform unauthorized actions.
    impact: "Critical: Security compromise, data exfiltration, uncontrolled side effects"
    likelihood: "Medium: Requires careful adapter implementation and testing"
    mitigations:
    - "Adapter spawns agent in restricted environment"
    - "Add seccomp profile as defense in depth (future enhancement)"
    - "Fuzz testing of request parsing"
    - "Code review focused on boundary enforcement"
    - "Continuous conformance testing"
    evidence_ids:
    - EVID-0003
    - EVID-0013
    - EVID-0014

  - id: RSK-RFC-0002
    statement: |
      SQLite WAL mode may cause performance issues under high write load,
      with WAL checkpointing causing latency spikes.
    impact: "Medium: Degraded performance, potential stalls during checkpointing"
    likelihood: "Low to Medium: Depends on write volume and disk I/O"
    mitigations:
    - "Configure WAL checkpoint thresholds"
    - "Monitor write latency metrics"
    - "Implement automatic checkpointing during idle periods"
    - "Design for async writes where possible"
    evidence_ids:
    - EVID-0004
    - EVID-0011

  - id: RSK-RFC-0003
    statement: |
      Deterministic reducer replay may become slow as ledger grows, impacting
      startup time and recovery scenarios.
    impact: "Medium: Slow startup, increased recovery time"
    likelihood: "Medium: Grows with ledger size over time"
    mitigations:
    - "Implement checkpoint-based recovery"
    - "Periodic projection snapshots"
    - "Lazy projection loading"
    - "Ledger compaction for old completed work (future)"
    evidence_ids:
    - EVID-0005

  - id: RSK-RFC-0004
    statement: |
      Black-box adapter observation may miss transient states or misclassify
      agent actions, leading to incomplete event streams.
    impact: "Medium: Reduced observability, potential missed violations"
    likelihood: "Medium: Observation-based detection is inherently imprecise"
    mitigations:
    - "Prefer instrumented adapters when available"
    - "Conservative default policies for black-box adapters"
    - "Periodic reconciliation of observed vs expected state"
    - "Alert on observation gaps"
    evidence_ids:
    - EVID-0001

  - id: RSK-RFC-0005
    statement: |
      Entropy budget thresholds may be miscalibrated, causing either excessive
      session termination (too low) or insufficient protection (too high).
    impact: "Medium: Productivity loss or degraded safety"
    likelihood: "Medium: Optimal thresholds are workload-dependent"
    mitigations:
    - "Start with conservative defaults"
    - "Collect metrics on entropy consumption patterns"
    - "Provide tuning guidance based on observed data"
    - "Support per-work-type budget profiles"
    evidence_ids:
    - EVID-0006
    - EVID-0018

  - id: RSK-RFC-0006
    statement: |
      Protobuf schema evolution may introduce incompatibilities if not managed
      carefully, breaking ledger replay or federation (RFC-0002).
    impact: "High: Ledger corruption, interoperability failures"
    likelihood: "Low: Mitigated by explicit versioning rules"
    mitigations:
    - "Strict schema versioning with compatibility windows"
    - "Forbid field removal or type changes"
    - "Automated compatibility tests in CI"
    - "Upcasting transformers for old event formats"
    evidence_ids:
    - EVID-0008

  open_questions:
  - id: Q-RFC-0001
    question: |
      What is the optimal entropy budget configuration for different work types
      (tickets, PRD refinement, review) and agent capabilities?
    decision_needed_by: "2026-02-15"
    resolution_plan: |
      Collect entropy consumption data during ROL-0002 (supervised self-hosting).
      Analyze patterns by work type and agent. Propose initial defaults with
      tuning guidance.

  - id: Q-RFC-0002
    question: |
      Should seccomp profiles be included in v0 as defense in depth, or
      deferred to a security hardening follow-up?
    status: RESOLVED
    resolution: |
      Seccomp is deferred from v0 core scope. Rationale:
      - v0 is Linux-only (seccomp is Linux-specific) - acceptable scope
      - Bootstrap phases use trusted agents only
      - "Ship fast, harden later" philosophy accepted for initial rollout
      - Not a hard gate for ROL-0004 milestone

      TCK-00025 added as optional hardening ticket for pre-production phase.

  - id: Q-RFC-0003
    question: |
      What is the minimum viable policy DSL for v0? Should it support
      complex conditions (AND/OR trees) or only simple allowlists?
    decision_needed_by: "2026-02-10"
    resolution_plan: |
      Implement simple allowlist-based policy first (TCK-00009).
      Extend to conditional rules if needed during supervised self-hosting.
      Document extension points for future DSL enhancements.

  - id: Q-RFC-0004
    question: |
      How should the kernel handle inference provider unavailability (local
      model crash, remote API timeout)?
    decision_needed_by: "2026-02-15"
    resolution_plan: |
      Define fallback behavior in policy. Options: retry with backoff,
      fail the request, queue for later. Implement in TCK-00016.
