rfc_design_decisions:
  schema_version: "2026-02-05"
  template_version: "2026-01-23"

  decisions:
    - id: "DEC-0001"
      title: "HSI syscall ABI is the stable contract boundary"
      statement: "CLI and adapters are projections; daemon-enforced syscall semantics define authoritative behavior."
      context: "Prevents vendor/runtime-specific drift in holonic coordination semantics."
      alternatives:
        - id: "ALT-0001"
          name: "CLI text UX as normative API"
          pros: ["human readability"]
          cons: ["non-deterministic parsing", "semantic drift"]
          security_tradeoffs: ["parser ambiguity increases confused-deputy risk"]
          operability_tradeoffs: ["poor machine compatibility"]
      chosen_rationale: "Structured daemon ABI is mechanically checkable, replayable, and composable."
      impacted_requirement_ids: ["REQ-0001", "REQ-0002"]
      evidence_ids: ["EVID-0001"]

    - id: "DEC-0002"
      title: "Identity is self-certifying with stable genesis-derived IDs"
      statement: "Cell and holon IDs derive from genesis commitments; operational key rotation never renames identities."
      context: "Audit graphs and delegation chains must survive key rotation at civilizational scale."
      alternatives:
        - id: "ALT-0002"
          name: "derive IDs from current operational keys"
          pros: ["simple mental model"]
          cons: ["identity instability", "audit graph fragmentation"]
          security_tradeoffs: ["rotation events become semantic identity changes"]
          operability_tradeoffs: ["migration complexity and cache invalidation storms"]
      chosen_rationale: "Stable IDs + operational key rotation preserve both security and continuity."
      impacted_requirement_ids: ["REQ-0007", "REQ-0008"]
      evidence_ids: ["EVID-0002"]

    - id: "DEC-0003"
      title: "Key hierarchy split: root vs operational vs session"
      statement: "Root keys anchor identity; operational keys authorize control-plane actions; session keys handle hot-path channel auth."
      context: "Minimizes blast radius and protects root identities from hot-path compromise."
      alternatives:
        - id: "ALT-0003"
          name: "single key for all functions"
          pros: ["lower implementation complexity"]
          cons: ["root key overexposure", "poor compromise recovery"]
          security_tradeoffs: ["high-value key in hot path"]
          operability_tradeoffs: ["forced global rekey on incident"]
      chosen_rationale: "Separation of concerns yields safer rotation and clearer authorization semantics."
      impacted_requirement_ids: ["REQ-0008", "REQ-0009"]
      evidence_ids: ["EVID-0003"]

    - id: "DEC-0004"
      title: "Directory proofs are explicit, typed, and bounded"
      statement: "DirectoryProofV1 and IdentityMultiProofV1 provide bounded, O(log n)-class verification with explicit proof profiles."
      context: "Asymptotics alone are insufficient; proof byte budgets must be enforceable pre-decode."
      alternatives:
        - id: "ALT-0004"
          name: "implicit ADS proof format"
          pros: ["smaller spec surface initially"]
          cons: ["interoperability ambiguity", "DoS risk"]
          security_tradeoffs: ["parser differentials"]
          operability_tradeoffs: ["cross-language verifier drift"]
      chosen_rationale: "Explicit proof schemas are required for bounded verification economics at 10^12 scale."
      impacted_requirement_ids: ["REQ-0010", "REQ-0011", "REQ-0012", "REQ-0013"]
      evidence_ids: ["EVID-0004"]

    - id: "DEC-0005"
      title: "Revocation-wins CRDT law for identity directory convergence"
      statement: "Concurrent conflicts favor REVOKED status unless later authorized re-admission anchor is proven."
      context: "Prevents resurrection-by-race under partition and Byzantine timing conditions."
      alternatives:
        - id: "ALT-0005"
          name: "last-write-wins directory"
          pros: ["simpler generic merge"]
          cons: ["revocation race vulnerability"]
          security_tradeoffs: ["attacker can resurrect keys via timing"]
          operability_tradeoffs: ["unpredictable post-partition state"]
      chosen_rationale: "Identity safety requires monotone revocation semantics."
      impacted_requirement_ids: ["REQ-0014"]
      evidence_ids: ["EVID-0005"]

    - id: "DEC-0006"
      title: "AuthoritySealV1 unifies fact authentication"
      statement: "Signed/attested facts use one abstraction supporting direct and Merkle-batched modes."
      context: "Avoid semantic collisions between environment attestation and fact authentication."
      alternatives:
        - id: "ALT-0006"
          name: "artifact-specific signature wrappers"
          pros: ["local flexibility"]
          cons: ["semantic drift", "tooling fragmentation"]
          security_tradeoffs: ["confused-deputy risk"]
          operability_tradeoffs: ["verifier complexity"]
      chosen_rationale: "Single authority-seal abstraction gives composable proof logic."
      impacted_requirement_ids: ["REQ-0016", "REQ-0017"]
      evidence_ids: ["EVID-0006"]

    - id: "DEC-0007"
      title: "HTF-governed freshness and expiry"
      statement: "Freshness policy uses ledger lag (and optional local tick lag), never remote wall-clock authority."
      context: "Cross-cell wall-time comparability is unsafe and non-deterministic."
      alternatives:
        - id: "ALT-0007"
          name: "wall-clock age thresholds"
          pros: ["human intuitive"]
          cons: ["time oracle attacks", "drift-induced disagreement"]
          security_tradeoffs: ["NTP manipulation sensitivity"]
          operability_tradeoffs: ["replay instability"]
      chosen_rationale: "RFC-0016 time authority matrix requires ledger/HTF-grounded policy checks."
      impacted_requirement_ids: ["REQ-0018"]
      evidence_ids: ["EVID-0007"]

    - id: "DEC-0008"
      title: "EpochSealV1 for anti-rollback federation freshness"
      statement: "Tier2+ cross-cell authority claims must bind to verifiable epoch seals; optional VDF adds adversarial delay barriers."
      context: "Federated replay/equivocation resistance needs monotone temporal commitment beyond ad-hoc timestamps."
      alternatives:
        - id: "ALT-0008"
          name: "no epoch sealing"
          pros: ["lower implementation work"]
          cons: ["weak replay semantics"]
          security_tradeoffs: ["fork/replay amplification"]
          operability_tradeoffs: ["ambiguous freshness under partition"]
      chosen_rationale: "Epoch-sealed authority reduces replay surface while preserving HTF semantics."
      impacted_requirement_ids: ["REQ-0019", "REQ-0020"]
      evidence_ids: ["EVID-0008"]

    - id: "DEC-0009"
      title: "Functorial observation law for optimization safety"
      statement: "Admitted implementation rewrites must preserve observation functor laws and bounded bisimulation equivalence."
      context: "Ensures batching/caching/routing optimizations do not mutate truth semantics."
      alternatives:
        - id: "ALT-0009"
          name: "informal regression testing only"
          pros: ["faster iteration"]
          cons: ["semantic regressions at depth"]
          security_tradeoffs: ["silent boundary drift"]
          operability_tradeoffs: ["hard-to-debug recursion failures"]
      chosen_rationale: "Formal composition constraints are necessary for recursive correctness guarantees."
      impacted_requirement_ids: ["REQ-0021", "REQ-0022"]
      evidence_ids: ["EVID-0009"]

    - id: "DEC-0010"
      title: "Active-inference objective is advisory, never authoritative"
      statement: "Bounded expected free energy may guide planning, but cannot bypass capability/stop/freshness/attestation gates."
      context: "Preserves autonomy gains without governance erosion."
      alternatives:
        - id: "ALT-0010"
          name: "planner objective can directly trigger actuation"
          pros: ["fewer coordination round trips"]
          cons: ["policy bypass risk"]
          security_tradeoffs: ["model-induced unsafe actuation"]
          operability_tradeoffs: ["non-auditable escalation loops"]
      chosen_rationale: "Internal optimization must remain subordinate to kernel enforcement."
      impacted_requirement_ids: ["REQ-0023"]
      evidence_ids: ["EVID-0010"]

    - id: "DEC-0011"
      title: "BFT-composed batching via FactRootV1"
      statement: "High-volume receipt roots compose with RFC-0014 quorum checkpoints through FactRoot commitments and proof pointers."
      context: "Prevents free-floating seal proliferation and supports <1% overhead contract."
      alternatives:
        - id: "ALT-0011"
          name: "independent authority seal per batch"
          pros: ["simple local batching"]
          cons: ["verification/distribution overhead at scale"]
          security_tradeoffs: ["more key-material handling surfaces"]
          operability_tradeoffs: ["higher bandwidth and verifier cost"]
      chosen_rationale: "Checkpoint-level composition amortizes signature/quorum work."
      impacted_requirement_ids: ["REQ-0024", "REQ-0026"]
      evidence_ids: ["EVID-0011"]

    - id: "DEC-0012"
      title: "Hierarchical batch forests for exabyte evidence"
      statement: "BatchEpochRootV1 supports root-of-roots commitments to keep proof traversal bounded at civilizational scale."
      context: "Single-level batching alone is insufficient for sustained multi-cell high-volume receipt traversal."
      alternatives:
        - id: "ALT-0012"
          name: "single-level batch roots only"
          pros: ["simpler implementation"]
          cons: ["higher root churn and traversal overhead"]
          security_tradeoffs: ["larger proof fanout surfaces"]
          operability_tradeoffs: ["inefficient anti-entropy checkpointing"]
      chosen_rationale: "Hierarchical commitments keep verification and transport economics stable."
      impacted_requirement_ids: ["REQ-0025"]
      evidence_ids: ["EVID-0012"]

    - id: "DEC-0013"
      title: "Delegation semantics as meet over authority lattice"
      statement: "Permeability delegation is admitted only when delegated authority equals meet(parent, overlay)."
      context: "Textual strict-subset statements are unenforceable without an algorithmic lattice model."
      alternatives:
        - id: "ALT-0013"
          name: "field-by-field ad hoc checks"
          pros: ["faster initial coding"]
          cons: ["laundering gaps"]
          security_tradeoffs: ["constraint bypass via unmodeled dimensions"]
          operability_tradeoffs: ["inconsistent behavior across reducers"]
      chosen_rationale: "Algorithmic meet ensures deterministic, auditable strict-subset enforcement."
      impacted_requirement_ids: ["REQ-0027"]
      evidence_ids: ["EVID-0013"]

    - id: "DEC-0014"
      title: "Implementation ratchet with formal and operational gates"
      statement: "Stage promotion requires objective tests, formal artifacts, and business-continuity evidence; no silent policy relaxation."
      context: "High-assurance rollout for recursive distributed systems requires staged enforcement and reversible control."
      alternatives:
        - id: "ALT-0014"
          name: "big-bang enforcement rollout"
          pros: ["faster feature completion"]
          cons: ["high outage/regression risk"]
          security_tradeoffs: ["latent bypasses under pressure"]
          operability_tradeoffs: ["hard rollback and diagnosis"]
      chosen_rationale: "Ratchet model balances liveness with containment and correctness priorities."
      impacted_requirement_ids: ["REQ-0021", "REQ-0022", "REQ-0036"]
      evidence_ids: ["EVID-0014"]

  design_appendix:
    source_section_refs:
      - "HOLONIC_SUBSTRATE_INTERFACE.md §1"
      - "HOLONIC_SUBSTRATE_INTERFACE.md §2"
      - "HOLONIC_SUBSTRATE_INTERFACE.md §8.3"
      - "HOLONIC_SUBSTRATE_INTERFACE.md §9.5"
      - "HOLONIC_SUBSTRATE_INTERFACE.md §10"
    no_loss_note: |
      Where structured decision entries are condensed, normative force remains anchored
      to the master section references listed above.
