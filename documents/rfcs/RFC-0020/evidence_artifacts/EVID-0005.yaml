evidence_artifact:
  schema_version: "2026-01-23"
  id: "EVID-0005"
  title: "Pre-actuation stop and budget proof obligations evidence"
  category: "INTEGRATION_TEST_RESULT"
  status: "PASS"
  description: |
    Evidence bundle for REQ-0005 showing pre-actuation stop/budget
    proof behavior and production governance freshness wiring coverage for
    TCK-00351 (PR #456). The covered behaviors include periodic governance
    freshness checks, probe success/failure signaling, and replay proof
    semantics for deferred budget enforcement.
  requirement_ids:
    - "REQ-0005"
  source_refs:
    - "crates/apm2-daemon/src/state.rs"
    - "crates/apm2-daemon/src/protocol/dispatch.rs"
    - "crates/apm2-daemon/src/protocol/session_dispatch.rs"
    - "crates/apm2-daemon/src/episode/preactuation.rs"
    - "proto/apm2d_runtime_v1.proto"
  artifacts:
    - type: "test_output"
      description: |
        Regression and integration tests relevant to stop/budget/governance:
        - state::tests::production_wiring_transitional_governance_uncertain_allows_gate
        - state::tests::production_wiring_periodic_probe_keeps_governance_uncertainty_in_transitional_mode
        - state::tests::production_wiring_claim_work_success_does_not_clear_transitional_uncertainty
        - state::tests::non_transitional_governance_failure_denies_after_deadline
        - state::tests::update_stop_flags_emergency_stop_denies_subsequent_request_tool
        - state::tests::spawn_default_max_episodes_allows_first_request_tool_gate
        - episode::preactuation::tests::test_gate_uncertain_transitional_mode_allows_past_deadline
        - episode::preactuation::tests::test_gate_uncertain_transitional_mode_waiver_currently_active
        - episode::preactuation::tests::test_replay_budget_not_checked_allowed_when_deferred
        - episode::preactuation::tests::test_replay_budget_not_checked_without_deferred_fails
        - episode::preactuation::tests::test_replay_equal_wall_higher_logical_allows
        - episode::preactuation::tests::test_budget_checked_false_with_deferred_tracker
        - episode::preactuation::tests::test_budget_checked_true_with_real_tracker
        Mandatory daemon verification command:
        cargo test -p apm2-daemon
      ref: "cargo test -p apm2-daemon"
