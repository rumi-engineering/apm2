rfc_ticket_decomposition:
  schema_version: "2026-02-05"
  template_version: "2026-01-24"
  assumptions:
    - "TCK-00326..TCK-00346 are already present on main and are treated as landed prerequisites."
    - "Ticket IDs in this RFC decomposition start at TCK-00347."
  principles:
    - "Tickets MUST be atomic and independently verifiable."
    - "Each ticket MUST bind requirement_ids and evidence_ids."
    - "Cross-ticket dependencies MUST be explicit and minimal."
    - "Fail-closed behavior is the default for security and verification boundaries."
    - "Each stage promotion MUST be evidence-gated with canary-first rollout."
  ticket_plan:
    ticket_storage_root: "documents/work/tickets/"
    sequence_start: "TCK-00347"
    tickets:
      - ticket_id: "TCK-00347"
        title: "S0 contract manifest determinism and semantics annotations"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00347.yaml#ticket_meta"
        scope:
          in_scope:
            - "Generate HSIContractManifestV1 from daemon/CLI dispatch registry"
            - "Require per-route semantics annotations and fail build on missing semantics"
            - "Produce deterministic canonical bytes + golden hash fixtures"
          out_of_scope:
            - "Handshake exchange mechanics (TCK-00348)"
        binds:
          requirement_ids: ["REQ-0001"]
          evidence_ids: ["EVID-0001", "EVID-0301"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_DAEMON", "DOMAIN_PROTOCOL"]
        dependencies: []
        definition_of_done:
          criteria:
            - "Manifest generation deterministic across repeat builds"
            - "Missing route semantics annotation fails CI/build"
            - "Golden hash fixture tests pass"
          evidence_ids: ["EVID-0001", "EVID-0301"]

      - ticket_id: "TCK-00348"
        title: "Handshake contract-hash binding and tiered mismatch gates"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00348.yaml#ticket_meta"
        scope:
          in_scope:
            - "Extend handshake to exchange cli_contract_hash and canonicalizer id/version"
            - "Persist bindings in SessionStarted and authoritative receipt context"
            - "Implement Tier0-1 warn/waive and Tier2+ deny-by-default mismatch policy"
          out_of_scope:
            - "Session-type state machine hardening (TCK-00349)"
        binds:
          requirement_ids: ["REQ-0002"]
          evidence_ids: ["EVID-0002", "EVID-0301"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_DAEMON", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00347"]
        definition_of_done:
          criteria:
            - "Handshake fails closed for Tier2+ contract/canonicalizer mismatch"
            - "SessionStarted binds contract hash and canonicalizer metadata"
            - "Mismatch counters emitted with risk-tier labels"
          evidence_ids: ["EVID-0002", "EVID-0301"]

      - ticket_id: "TCK-00349"
        title: "Session-typed state machine and fail-closed decoding hardening"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00349.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement/verify session-open to authority-bearing state transitions"
            - "Enforce bounded decode and bounded collections before/after decode"
            - "Enforce unknown/invalid enum fail-closed behavior without truncation"
          out_of_scope:
            - "Identity proof artifacts (TCK-00353..TCK-00357)"
        binds:
          requirement_ids: ["REQ-0003"]
          evidence_ids: ["EVID-0003", "EVID-0101"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_DAEMON", "DOMAIN_KERNEL", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00348"]
        definition_of_done:
          criteria:
            - "No privileged route reachable before validated session-open state"
            - "Bound violations reject requests with structured defects"
            - "Invalid enum values never coerce to permissive defaults"
          evidence_ids: ["EVID-0003", "EVID-0101"]

      - ticket_id: "TCK-00350"
        title: "EpisodeEnvelope and receipt binding enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00350.yaml#ticket_meta"
        scope:
          in_scope:
            - "Require EpisodeEnvelopeV1 for spawn/resume and tool execution"
            - "Bind envelope hash, capability manifest hash, and view commitment hash into receipts"
            - "Fail closed on missing or mismatched bindings"
          out_of_scope:
            - "Capability minting path constraints (TCK-00351)"
        binds:
          requirement_ids: ["REQ-0004"]
          evidence_ids: ["EVID-0004", "EVID-0305"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_KERNEL", "DOMAIN_DAEMON"]
        dependencies: ["TCK-00348"]
        definition_of_done:
          criteria:
            - "Tool receipts always carry envelope/capability/view bindings"
            - "Spawn/resume denied when envelope absent or malformed"
            - "Replay harness can resolve and verify bindings from CAS + ledger"
          evidence_ids: ["EVID-0004", "EVID-0305"]

      - ticket_id: "TCK-00351"
        title: "Pre-actuation stop and budget proof obligations"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00351.yaml#ticket_meta"
        scope:
          in_scope:
            - "Enforce stop conditions and budget checks before tool actuation"
            - "Emit explicit StopChecked/BudgetChecked or equivalent embedded receipt fields"
            - "Add deterministic replay checks for precondition ordering"
          out_of_scope:
            - "Capability scope policy resolver changes (TCK-00352)"
        binds:
          requirement_ids: ["REQ-0005"]
          evidence_ids: ["EVID-0005", "EVID-0305"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_KERNEL", "DOMAIN_GOVERNANCE"]
        dependencies: ["TCK-00350"]
        definition_of_done:
          criteria:
            - "No tool actuation occurs without prior stop/budget evaluation"
            - "Replay harness verifies ordering invariants"
            - "Stop uncertainty triggers deny in configured deadline path"
          evidence_ids: ["EVID-0005", "EVID-0305"]

      - ticket_id: "TCK-00352"
        title: "Policy-only capability minting and broker scope enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00352.yaml#ticket_meta"
        scope:
          in_scope:
            - "Mint CapabilityManifestV1 only via policy resolver (no requester minting)"
            - "Enforce non-discoverability and scoped broker checks"
            - "Add laundering negatives: widened risk tier, missing expiry, overbroad scope"
          out_of_scope:
            - "Delegation meet algorithm for permeability (TCK-00373)"
        binds:
          requirement_ids: ["REQ-0006"]
          evidence_ids: ["EVID-0006", "EVID-0305"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_DAEMON"]
        dependencies: ["TCK-00350"]
        definition_of_done:
          criteria:
            - "Capability manifests cannot be minted by requester surfaces"
            - "Out-of-scope tool/path/host attempts denied with defects"
            - "Envelope-manifest hash mismatch always denies actuation"
          evidence_ids: ["EVID-0006", "EVID-0305"]

      - ticket_id: "TCK-00353"
        title: "Canonical key identifiers (PublicKeyIdV1 and KeySetIdV1)"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00353.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement canonical binary/text forms for PublicKeyIdV1 and KeySetIdV1"
            - "Enforce strict grammar and bounded length for identity key IDs"
            - "Publish conformance vectors and parser differential tests"
          out_of_scope:
            - "Cell/Holon ID derivation and certificate artifacts (TCK-00354, TCK-00355)"
        binds:
          requirement_ids: ["REQ-0007"]
          evidence_ids: ["EVID-0007", "EVID-0303"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_CRYPTO", "DOMAIN_PROTOCOL"]
        dependencies: ["TCK-00349"]
        definition_of_done:
          criteria:
            - "Canonical parser rejects mixed case/whitespace/non-canonical encodings"
            - "Binary and text identity forms round-trip losslessly"
            - "Cross-language conformance vectors are stable"
          evidence_ids: ["EVID-0007", "EVID-0303"]

      - ticket_id: "TCK-00354"
        title: "Stable CellIdV1 and HolonIdV1 genesis derivation"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00354.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement CellGenesisV1 and HolonGenesisV1 artifacts"
            - "Derive stable CellIdV1 and HolonIdV1 from genesis commitments"
            - "Guarantee operational key rotation does not rename identities"
          out_of_scope:
            - "Certificate and session delegation bindings (TCK-00355)"
        binds:
          requirement_ids: ["REQ-0008"]
          evidence_ids: ["EVID-0008", "EVID-0303"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_CRYPTO", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00353"]
        definition_of_done:
          criteria:
            - "ID derivation deterministic and collision-resistant under declared hash profile"
            - "Rotation events preserve stable IDs"
            - "Genesis artifacts are hash-addressed in CAS"
          evidence_ids: ["EVID-0008", "EVID-0303"]

      - ticket_id: "TCK-00355"
        title: "Cell/Holon certificates and session-key delegation"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00355.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement CellCertificateV1 and HolonCertificateV1 validation rules"
            - "Implement SessionKeyDelegationV1 for hot-path auth"
            - "Enforce root vs operational vs session key role separation"
          out_of_scope:
            - "Directory proofs and proof economics (TCK-00356..TCK-00359)"
        binds:
          requirement_ids: ["REQ-0009"]
          evidence_ids: ["EVID-0009", "EVID-0303"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_CRYPTO", "DOMAIN_SECURITY", "DOMAIN_DAEMON"]
        dependencies: ["TCK-00354"]
        definition_of_done:
          criteria:
            - "Certificate verification checks bindings and expiry constraints"
            - "Session key delegation bounded by operational key authority"
            - "Role overlap between root/operational/session keys is rejected"
          evidence_ids: ["EVID-0009", "EVID-0303"]

      - ticket_id: "TCK-00356"
        title: "Directory head and identity proof artifact family"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00356.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement HolonDirectoryHeadV1, IdentityProofV1, and DirectoryProofV1"
            - "Require proof-carrying pointers for identity-bearing boundary messages"
            - "Bind directory head to authority seals and freshness policy references"
          out_of_scope:
            - "Proof-profile economics and caching policy (TCK-00358, TCK-00359)"
        binds:
          requirement_ids: ["REQ-0010"]
          evidence_ids: ["EVID-0010", "EVID-0303"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00355"]
        definition_of_done:
          criteria:
            - "Identity-bearing messages include identity_proof_hash pointers"
            - "Directory head hashes resolve to signed/authenticated head artifacts"
            - "Unproofed identity values rejected for authoritative operations"
          evidence_ids: ["EVID-0010", "EVID-0303"]

      - ticket_id: "TCK-00357"
        title: "O(log n) verifier implementation with bounded decode economics"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00357.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement bounded ADS proof verification (SMT/Patricia profile)"
            - "Enforce pre-decode proof byte caps and post-decode node/depth caps"
            - "Add malformed/over-depth/forged proof negative suites"
          out_of_scope:
            - "Proof-profile pinning and verifier cache policy (TCK-00358, TCK-00359)"
        binds:
          requirement_ids: ["REQ-0011"]
          evidence_ids: ["EVID-0011", "EVID-0304"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_CRYPTO"]
        dependencies: ["TCK-00356"]
        definition_of_done:
          criteria:
            - "Verifier work class validated as O(log n) for admitted profiles"
            - "Bound violations fail closed before memory amplification"
            - "Forged/malformed proofs consistently denied"
          evidence_ids: ["EVID-0011", "EVID-0304"]

      - ticket_id: "TCK-00358"
        title: "IdentityProofProfileV1 and profile-hash enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00358.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement IdentityProofProfileV1 schema and profile hash pinning"
            - "Require identity_proof_profile_hash in directory heads and session-open path"
            - "Fail Tier2+ actuation on unknown or mismatched proof profiles"
          out_of_scope:
            - "Verifier cache invalidation behavior (TCK-00359)"
        binds:
          requirement_ids: ["REQ-0012"]
          evidence_ids: ["EVID-0012", "EVID-0304"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00357"]
        definition_of_done:
          criteria:
            - "Profile hash mismatch blocks authoritative verification"
            - "Session-open path records active proof profile hash"
            - "Unsupported profiles are rejected deterministically"
          evidence_ids: ["EVID-0012", "EVID-0304"]

      - ticket_id: "TCK-00359"
        title: "Verifier cache contract and invalidation correctness"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00359.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement cache model where one verified head amortizes many identity checks"
            - "Implement invalidation on revocation, rotation, and head advancement"
            - "Publish deterministic cache-safety tests and stale-cache negatives"
          out_of_scope:
            - "CRDT convergence law implementation (TCK-00360)"
        binds:
          requirement_ids: ["REQ-0013"]
          evidence_ids: ["EVID-0013", "EVID-0304"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_RELIABILITY"]
        dependencies: ["TCK-00358"]
        definition_of_done:
          criteria:
            - "Cache reuse measurably reduces repeated verification cost"
            - "Stale cache entries cannot authorize revoked identities"
            - "Invalidation path is deterministic and auditable"
          evidence_ids: ["EVID-0013", "EVID-0304"]

      - ticket_id: "TCK-00360"
        title: "Revocation-wins signed CRDT merge law"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00360.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement signed CRDT directory merges with revocation-wins semantics"
            - "Require explicit re-admission anchors for post-revocation activation"
            - "Run partition/rejoin simulations with Byzantine reordering"
          out_of_scope:
            - "Anti-entropy transport protocol mechanics (TCK-00381)"
        binds:
          requirement_ids: ["REQ-0014"]
          evidence_ids: ["EVID-0014", "EVID-0304"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_CONSENSUS", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00359"]
        definition_of_done:
          criteria:
            - "Concurrent updates converge deterministically"
            - "Revoked identities cannot resurrect without explicit re-admission proof"
            - "Byzantine ordering does not violate revocation-wins law"
          evidence_ids: ["EVID-0014", "EVID-0304"]

      - ticket_id: "TCK-00361"
        title: "Session-open identity proof and freshness enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00361.yaml#ticket_meta"
        scope:
          in_scope:
            - "Require holon_id + identity_proof_hash on client open"
            - "Require daemon response with cell_certificate_hash and directory head hash"
            - "Enforce FreshnessPolicy by risk tier for session authority"
          out_of_scope:
            - "Epoch seal issuance model (TCK-00366)"
        binds:
          requirement_ids: ["REQ-0015"]
          evidence_ids: ["EVID-0015", "EVID-0303", "EVID-0110"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_DAEMON", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00356", "TCK-00359"]
        definition_of_done:
          criteria:
            - "Tier2+ authority denied on stale/missing identity freshness proofs"
            - "Discovery-only surfaces can proceed under configured degraded policy"
            - "Session-open path is fully receipt/defect-instrumented"
          evidence_ids: ["EVID-0015", "EVID-0110"]

      - ticket_id: "TCK-00362"
        title: "AuthoritySealV1 unified fact-authentication implementation"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00362.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement AuthoritySealV1 supporting direct and Merkle-batch seal kinds"
            - "Enforce domain separation by artifact kind and schema version"
            - "Require ledger/quorum anchor binding for authoritative seals"
          out_of_scope:
            - "ReceiptPointer defaults and multiproof transport (TCK-00363)"
        binds:
          requirement_ids: ["REQ-0016"]
          evidence_ids: ["EVID-0016", "EVID-0306"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_CRYPTO"]
        dependencies: ["TCK-00357"]
        definition_of_done:
          criteria:
            - "AuthoritySeal verifies both direct and batch-authenticated facts"
            - "Unsigned/free-floating batch roots are rejected for authority use"
            - "Domain separation tags are required and validated"
          evidence_ids: ["EVID-0016", "EVID-0306"]

      - ticket_id: "TCK-00363"
        title: "ReceiptPointerV1 and ReceiptMultiProofV1 default pointer path"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00363.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement ReceiptPointerV1 with direct-signature or batch/FactRoot paths"
            - "Implement ReceiptMultiProofV1 for compact multi-receipt membership proofs"
            - "Update verifier and auditor tooling to accept equivalent direct vs batched semantics"
          out_of_scope:
            - "Hierarchy root-of-roots batching (TCK-00371)"
        binds:
          requirement_ids: ["REQ-0017"]
          evidence_ids: ["EVID-0017", "EVID-0306"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00362"]
        definition_of_done:
          criteria:
            - "Cross-holon authoritative receipt references use ReceiptPointer by default"
            - "Multiproof validation yields deterministic membership results"
            - "Behavioral acceptance equivalence documented and tested"
          evidence_ids: ["EVID-0017", "EVID-0306"]

      - ticket_id: "TCK-00364"
        title: "FreshnessPolicyV1 HTF authority integration"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00364.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement FreshnessPolicyV1 risk-tier-specific staleness actions"
            - "Use ledger-anchor lag (and local tick where configured) as freshness authority"
            - "Forbid remote wall-clock deltas in authorization decisions"
          out_of_scope:
            - "Epoch seal issuance and monotonicity (TCK-00365)"
        binds:
          requirement_ids: ["REQ-0018"]
          evidence_ids: ["EVID-0018", "EVID-0309"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_HTF", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00361"]
        definition_of_done:
          criteria:
            - "Tier2+ stale heads deny authoritative actions"
            - "Policy evaluator uses HTF-compatible lag authority only"
            - "Staleness outcomes are deterministic and auditable"
          evidence_ids: ["EVID-0018", "EVID-0309"]

      - ticket_id: "TCK-00365"
        title: "EpochSealV1 monotonic sealing and validation path"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00365.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement EpochSealV1 schema, issuance, and verifier checks"
            - "Bind directory heads and receipt-batch epochs to epoch seals"
            - "Enforce monotonicity and reject rollback/equivocation in admission path"
          out_of_scope:
            - "Optional VDF profile (TCK-00366)"
        binds:
          requirement_ids: ["REQ-0019"]
          evidence_ids: ["EVID-0019", "EVID-0309"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_HTF", "DOMAIN_CONSENSUS", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00364"]
        definition_of_done:
          criteria:
            - "Epoch seals issued for configured freshness-critical artifacts"
            - "Admission path rejects non-monotone or conflicting epoch sequences"
            - "Tier2+ authority admissions fail closed on missing/invalid seals"
          evidence_ids: ["EVID-0019", "EVID-0309"]

      - ticket_id: "TCK-00366"
        title: "Optional VDF delay profile for adversarial federation links"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00366.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement optional VDF profile referenced by EpochSealV1"
            - "Derive deterministic challenge from (cell_id, prior_epoch_root, quorum_anchor)"
            - "Validate forged/fast-forward/conflicting VDF proofs in adversarial tests"
          out_of_scope:
            - "PQC algorithms (explicitly out of scope for RFC-0020)"
        binds:
          requirement_ids: ["REQ-0020"]
          evidence_ids: ["EVID-0020", "EVID-0309"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_CRYPTO", "DOMAIN_HTF", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00365"]
        definition_of_done:
          criteria:
            - "VDF profile can be enabled per-link/per-cell policy"
            - "Forged/non-monotone VDF evidence is rejected deterministically"
            - "Epoch seal verification remains bounded when VDF is enabled"
          evidence_ids: ["EVID-0020", "EVID-0309"]

      - ticket_id: "TCK-00367"
        title: "Bisimulation gate for recursive composition depth N<=12"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00367.yaml#ticket_meta"
        scope:
          in_scope:
            - "Define observable semantics and flattening relation for HSI operations"
            - "Produce machine-checkable bisimulation artifact for N<=12"
            - "Add promotion gate requiring bisimulation pass for recursion-sensitive changes"
          out_of_scope:
            - "Functorial optimization law proof (TCK-00368)"
        binds:
          requirement_ids: ["REQ-0021"]
          evidence_ids: ["EVID-0021", "EVID-0401"]
        custody_agent_roles: ["AGENT_FORMAL_METHODS"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_RELIABILITY"]
        dependencies: ["TCK-00350", "TCK-00361"]
        definition_of_done:
          criteria:
            - "Model artifact checks observational equivalence for N<=12"
            - "Counterexamples are emitted as blocking defects"
            - "Gate integration blocks promotion on proof failure"
          evidence_ids: ["EVID-0021", "EVID-0401"]

      - ticket_id: "TCK-00368"
        title: "Functorial observation law checks for admitted rewrites"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00368.yaml#ticket_meta"
        scope:
          in_scope:
            - "Encode functorial law constraints for optimization rewrites"
            - "Admit rewrite classes only when observation preservation is proven"
            - "Link rewrite policy to formal artifact review gate"
          out_of_scope:
            - "Active-inference planner objective integration (TCK-00369)"
        binds:
          requirement_ids: ["REQ-0022"]
          evidence_ids: ["EVID-0022", "EVID-0401"]
        custody_agent_roles: ["AGENT_FORMAL_METHODS"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_RELIABILITY"]
        dependencies: ["TCK-00367"]
        definition_of_done:
          criteria:
            - "Admitted rewrite catalog references proof obligations"
            - "Non-proven rewrites are blocked from release pipelines"
            - "Optimization does not change observable HSI truth semantics"
          evidence_ids: ["EVID-0022", "EVID-0401"]

      - ticket_id: "TCK-00369"
        title: "Bounded expected free energy planner integration (advisory-only)"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00369.yaml#ticket_meta"
        scope:
          in_scope:
            - "Expose bounded EFE scoring in coordination layer as advisory signal"
            - "Enforce hard separation between planner objective and authority checks"
            - "Add tests proving capability/stop/freshness gates cannot be bypassed"
          out_of_scope:
            - "AuthoritySeal and batch verification changes (TCK-00362..TCK-00363)"
        binds:
          requirement_ids: ["REQ-0023"]
          evidence_ids: ["EVID-0023"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_COORDINATION", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00351", "TCK-00364"]
        definition_of_done:
          criteria:
            - "Planner output cannot directly authorize actuation"
            - "Gate checks remain authoritative under all planner outcomes"
            - "Advisory objective outputs are auditable in receipts/logs"
          evidence_ids: ["EVID-0023"]

      - ticket_id: "TCK-00370"
        title: "FactRootV1 composition with RFC-0014 quorum checkpoints"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00370.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement FactRootV1 and bind batch roots into QC-certified checkpoints"
            - "Require ledger/quorum anchors for authoritative batch acceptance"
            - "Integrate FactRoot verification path in receipt pointer verifier"
          out_of_scope:
            - "Hierarchical batch forests (TCK-00371)"
        binds:
          requirement_ids: ["REQ-0024"]
          evidence_ids: ["EVID-0024", "EVID-0306"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_CONSENSUS", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00362", "TCK-00363"]
        definition_of_done:
          criteria:
            - "BFT-mode batch roots are checkpoint-composed by default"
            - "Verifier supports QC + FactRoot proof path"
            - "Free-floating batch roots are not accepted for authority"
          evidence_ids: ["EVID-0024", "EVID-0306"]

      - ticket_id: "TCK-00371"
        title: "BatchEpochRootV1 hierarchical batch forests"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00371.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement BatchEpochRootV1 root-of-roots commitments"
            - "Add epoch-level anti-entropy pointers for large-scale traversal"
            - "Maintain bounded verifier work for deep batch histories"
          out_of_scope:
            - "Overhead gate enforcement harness (TCK-00372)"
        binds:
          requirement_ids: ["REQ-0025"]
          evidence_ids: ["EVID-0025", "EVID-0306"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_RELIABILITY"]
        dependencies: ["TCK-00370"]
        definition_of_done:
          criteria:
            - "Hierarchical roots are deterministic and content-addressed"
            - "Verifier can traverse root-of-roots with bounded memory"
            - "Anti-entropy advertisements can reference epoch roots directly"
          evidence_ids: ["EVID-0025", "EVID-0306"]

      - ticket_id: "TCK-00372"
        title: "Attestation overhead contract and fallback safety"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00372.yaml#ticket_meta"
        scope:
          in_scope:
            - "Build perf harness for 10^6 and 10^8 measured scales with 10^12 projection model"
            - "Enforce <1% p99 CPU/network overhead gate for batched paths"
            - "Implement automatic fallback to direct verification on degradation/failure"
          out_of_scope:
            - "Relay hardening and federation rollout (TCK-00380+)"
        binds:
          requirement_ids: ["REQ-0026"]
          evidence_ids: ["EVID-0026", "EVID-0306"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_RELIABILITY", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00371"]
        definition_of_done:
          criteria:
            - "Overhead measurements captured and within gate budgets"
            - "Fallback path activates automatically on integrity/freshness/perf failure"
            - "Fallback behavior preserves acceptance semantics"
          evidence_ids: ["EVID-0026", "EVID-0306"]

      - ticket_id: "TCK-00373"
        title: "Permeability authority lattice meet algorithm enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00373.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement delegation meet across risk, capabilities, budgets, stop predicates, taint, and classification"
            - "Enforce strict-subset rule on PermeabilityReceipt admission"
            - "Require binding checks on permeability consumption path"
          out_of_scope:
            - "Federation relay channel policy (TCK-00381)"
        binds:
          requirement_ids: ["REQ-0027"]
          evidence_ids: ["EVID-0027", "EVID-0104"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_KERNEL"]
        dependencies: ["TCK-00352", "TCK-00360"]
        definition_of_done:
          criteria:
            - "Delegation widening attempts are denied"
            - "Meet algorithm deterministic across implementations"
            - "Negative tests cover recursion depth >=4 laundering attempts"
          evidence_ids: ["EVID-0027", "EVID-0104"]

      - ticket_id: "TCK-00374"
        title: "Capsule profile linux-ns-v1 hardening"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00374.yaml#ticket_meta"
        scope:
          in_scope:
            - "Enforce linux-ns-v1 profile with namespaces, seccomp, cgroups"
            - "Deny ambient egress by default and confine workspace root"
            - "Add capsule escape and path traversal adversarial tests"
          out_of_scope:
            - "Context firewall TOCTOU integrity checks (TCK-00375)"
        binds:
          requirement_ids: ["REQ-0028"]
          evidence_ids: ["EVID-0028", "EVID-0307"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_KERNEL", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00351"]
        definition_of_done:
          criteria:
            - "Tier3+ actuation executes only inside admitted capsule profile"
            - "Capsule egress defaults to deny unless policy grants explicit route"
            - "Escape attempts become blocking defects"
          evidence_ids: ["EVID-0028", "EVID-0307"]

      - ticket_id: "TCK-00375"
        title: "Context firewall and TOCTOU hash enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00375.yaml#ticket_meta"
        scope:
          in_scope:
            - "Enforce ContextPackManifest allowlist for all context reads"
            - "Verify TOCTOU hash consistency between selected artifacts and runtime reads"
            - "Hard-fail terminate Tier3+ sessions on firewall violations"
          out_of_scope:
            - "ToolKinds argument/idempotency hardening (TCK-00377)"
        binds:
          requirement_ids: ["REQ-0029"]
          evidence_ids: ["EVID-0029", "EVID-0307"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_DAEMON"]
        dependencies: ["TCK-00374"]
        definition_of_done:
          criteria:
            - "Out-of-pack context access always denied and logged"
            - "TOCTOU mismatches are detected before tool execution"
            - "Tier3+ violations terminate with mandatory defect emission"
          evidence_ids: ["EVID-0029", "EVID-0307"]

      - ticket_id: "TCK-00376"
        title: "No-bypass path ratchet enforcement"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00376.yaml#ticket_meta"
        scope:
          in_scope:
            - "Remove all allow-by-manifest and non-broker actuation bypasses"
            - "Add regression tests proving tool execution requires broker+capability+context firewall"
            - "Set Tier2+ deny-default when required enforcement components unavailable"
          out_of_scope:
            - "Structured ToolKinds hardening (TCK-00377)"
        binds:
          requirement_ids: ["REQ-0030"]
          evidence_ids: ["EVID-0030", "EVID-0307"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_DAEMON", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00375"]
        definition_of_done:
          criteria:
            - "No actuation path bypasses broker and policy checks"
            - "Unavailable enforcement dependency causes deny, never permissive fallback"
            - "Regression suite prevents bypass reintroduction"
          evidence_ids: ["EVID-0030", "EVID-0307"]

      - ticket_id: "TCK-00377"
        title: "Typed ToolKinds safety, idempotency, and validation"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00377.yaml#ticket_meta"
        scope:
          in_scope:
            - "Enforce typed ToolKind arguments with canonical validation rules"
            - "Implement git ref/path validation and idempotency preconditions"
            - "Gate structured shell bridge behind explicit allowlist policy"
          out_of_scope:
            - "Taint/confidentiality lattice propagation (TCK-00378)"
        binds:
          requirement_ids: ["REQ-0031"]
          evidence_ids: ["EVID-0031", "EVID-0308"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_TOOLING", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00376"]
        definition_of_done:
          criteria:
            - "Argument injection and path traversal regression suites pass"
            - "Non-idempotent tools declare and enforce preconditions"
            - "Raw command strings are not accepted on authoritative routes"
          evidence_ids: ["EVID-0031", "EVID-0308"]

      - ticket_id: "TCK-00378"
        title: "Dual lattice taint/classification propagation and declassification receipts"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00378.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement taint lattice and confidentiality lattice propagation rules"
            - "Apply dual-lattice policy hooks at boundary crossings and actuators"
            - "Introduce DeclassificationReceipt for approved confidentiality downgrades"
          out_of_scope:
            - "Attestation floor tightening for high-risk tiers (TCK-00379)"
        binds:
          requirement_ids: ["REQ-0032"]
          evidence_ids: ["EVID-0032", "EVID-0308"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_POLICY"]
        dependencies: ["TCK-00377"]
        definition_of_done:
          criteria:
            - "Tier3+ actuators reject untrusted or over-confidential inputs"
            - "Declassification requires explicit policy and receipt emission"
            - "Secret leakage adversarial tests pass"
          evidence_ids: ["EVID-0032", "EVID-0308"]

      - ticket_id: "TCK-00379"
        title: "Attestation floor tightening by risk tier"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00379.yaml#ticket_meta"
        scope:
          in_scope:
            - "Enforce stricter attestation requirements for Tier3+ and cross-cell ingestion"
            - "Bind attestation floor policy into envelopes and verification paths"
            - "Add deny/terminate behavior for floor violations"
          out_of_scope:
            - "Federation channel protocol rollout (TCK-00380..TCK-00382)"
        binds:
          requirement_ids: ["REQ-0033"]
          evidence_ids: ["EVID-0033", "EVID-0308"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_GOVERNANCE"]
        dependencies: ["TCK-00378", "TCK-00363"]
        definition_of_done:
          criteria:
            - "Tier3+ requests below attestation floor are denied"
            - "Cross-cell imported facts below floor are quarantined"
            - "Floor evaluations are receipt/audit-event visible"
          evidence_ids: ["EVID-0033", "EVID-0308"]

      - ticket_id: "TCK-00380"
        title: "HMP digest-first channels and admission receipt semantics"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00380.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement HMPMessageV1 class semantics (WORK, EVIDENCE, GOVERNANCE)"
            - "Enforce digest-first payload references and bounded fetch behavior"
            - "Issue admission receipts for imported authoritative facts"
          out_of_scope:
            - "Anti-entropy replication mechanics (TCK-00381)"
        binds:
          requirement_ids: ["REQ-0034"]
          evidence_ids: ["EVID-0034", "EVID-0107"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_DAEMON"]
        dependencies: ["TCK-00363", "TCK-00379"]
        definition_of_done:
          criteria:
            - "Routing facts and acceptance facts are operationally distinct"
            - "Authoritative imports require admission receipts bound to evidence"
            - "Unsolicited large payloads are dropped with bounded resource use"
          evidence_ids: ["EVID-0034", "EVID-0107"]

      - ticket_id: "TCK-00381"
        title: "Pull-only anti-entropy with Byzantine relay resistance"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00381.yaml#ticket_meta"
        scope:
          in_scope:
            - "Implement offer/compare/request/deliver anti-entropy protocol with pull-only semantics"
            - "Apply relay channel budgets, fanout caps, and replay protection"
            - "Run byzantine relay and partition/rejoin convergence simulations"
          out_of_scope:
            - "Epoch freshness gate enforcement for cross-cell authority (TCK-00382)"
        binds:
          requirement_ids: ["REQ-0035"]
          evidence_ids: ["EVID-0035", "EVID-0309"]
        custody_agent_roles: ["AGENT_IMPLEMENTER"]
        responsibility_domains: ["DOMAIN_PROTOCOL", "DOMAIN_RELIABILITY", "DOMAIN_SECURITY"]
        dependencies: ["TCK-00380", "TCK-00360"]
        definition_of_done:
          criteria:
            - "Anti-entropy delivery is strictly pull-based and bounded"
            - "Byzantine relay behaviors cannot force authority acceptance"
            - "Partition/rejoin converges under revocation-wins semantics"
          evidence_ids: ["EVID-0035", "EVID-0309"]

      - ticket_id: "TCK-00382"
        title: "Business continuity, formal gates, and federation stop/rotation governance"
        ticket_files:
          meta_ref: "documents/work/tickets/TCK-00382.yaml#ticket_meta"
        scope:
          in_scope:
            - "Instrument and enforce stop-path SLOs, RPO/RTO, and emergency key rotation flows"
            - "Integrate formal gate artifacts (session model, anti-entropy model, bisimulation, functor law) into promotion checks"
            - "Enable governance channel for stop/rotation across cells with breakglass controls"
          out_of_scope:
            - "Any PQC migration work (explicitly out of RFC-0020 scope)"
        binds:
          requirement_ids: ["REQ-0036"]
          evidence_ids: ["EVID-0036", "EVID-0401", "EVID-0402"]
        custody_agent_roles: ["AGENT_IMPLEMENTER", "AGENT_FORMAL_METHODS"]
        responsibility_domains: ["DOMAIN_RELIABILITY", "DOMAIN_SECURITY", "DOMAIN_GOVERNANCE"]
        dependencies:
          - "TCK-00365"
          - "TCK-00367"
          - "TCK-00368"
          - "TCK-00381"
        definition_of_done:
          criteria:
            - "Stop-path SLO violations trigger automated fail-safe actions"
            - "Formal artifacts are required inputs for stage promotion gates"
            - "Cross-cell governance stop/rotation operations are authenticated and auditable"
          evidence_ids: ["EVID-0036", "EVID-0401", "EVID-0402"]
