requirement:
  schema_version: "2026-02-05"
  id: "REQ-0031"
  title: "ToolKinds argument safety and idempotency"
  category: "SECURITY"
  priority: "P0"
  status: "PROPOSED"
  statement: |
    Authoritative tool routes MUST use typed ToolKinds with canonical argument validation, git path and ref validation, and idempotency or precondition declarations for side-effectful operations.

    Primary delivery ticket: TCK-00377
  rationale: |
    Typed actuation surfaces are required to prevent injection and nondeterministic behavior.
  acceptance_criteria:
    - "Argument injection and path traversal regression suites pass"
    - "Non-idempotent tools declare and enforce preconditions"
    - "Raw command strings are not accepted on authoritative routes"
    - "Primary implementation ticket TCK-00377 is completed with linked evidence."
  evidence_ids:
    - "EVID-0031"
  source_refs:
    - "HOLONIC_SUBSTRATE_INTERFACE.md ยง6.1.1"
    - "HOLONIC_SUBSTRATE_INTERFACE.md ยง6.1.2"
    - "HOLONIC_SUBSTRATE_INTERFACE.md ยง6.2.1"
