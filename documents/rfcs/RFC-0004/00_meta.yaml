rfc_meta:
  schema_version: "2026-01-24"
  template_version: "2026-01-24"
  rfc:
    id: RFC-0004
    title: "Agent Acceptance Testing (AAT) Implementation"
    status: APPROVED
    created_date: "2026-01-24"
    last_updated_date: "2026-01-24"
  binds_to_prd:
    prd_id: PRD-0003
    prd_base_path: "documents/prds/PRD-0003/"
    requirement_registry_ref: "requirements/"
    evidence_bundle_ref: "evidence_artifacts/"
    prd_meta_ref: "00_meta.yaml#prd_meta"
  protocol_profile:
    id: NONE
    applies: false
    inherited_from_prd: true
    profile_ref: ""
  custody:
    producing_agent_roles:
    - AGENT_AUTHOR
    - AGENT_ARCHITECT
    responsible_domains:
    - DOMAIN_BUILD_RELEASE
    - DOMAIN_SECURITY
    - DOMAIN_PRODUCT
    authority_signoffs_required:
    - AUTH_ARCHITECTURE
    - AUTH_SECURITY
    - AUTH_PRODUCT
  refs:
    standards:
      requirement_schema: "standards/schemas/02_requirement.schema.yaml#requirement_schema"
      evidence_artifact_schema: "standards/schemas/01_evidence_artifact.schema.yaml#evidence_artifact_schema"
      quality_coverage_schema: "standards/schemas/03_quality_coverage.schema.yaml#quality_coverage_schema"
      gate_review_schema: "standards/schemas/06_gate_review.schema.yaml#gate_review_schema"
      waiver_schema: "standards/schemas/05_waiver.schema.yaml#waiver_schema"
      ticket_meta_schema: "standards/schemas/04_ticket_meta.schema.yaml#ticket_meta_schema"
      lint_spec: "standards/lint/LINT_SPEC.yaml#lint_spec"
  implementation:
    language: Rust
    edition: "2021"
    crate_name: xtask
    implementation_approach: |
      Implementation extends existing xtask infrastructure rather than creating
      a separate apm2-aat crate. The `cargo xtask aat <PR_URL>` command invokes
      the AAT agent to verify PR acceptance criteria through hypothesis-driven
      testing. This approach leverages xtask patterns already established for
      security-review and quality-review commands.
    key_dependencies:
    - name: regex
      version: "1.x"
      purpose: "Pattern matching for anti-gaming detection (hardcoded values, TODO extraction)"
      already_in_xtask: true
    - name: serde
      version: "1.x"
      purpose: "Serialization for evidence bundle output and PR parsing"
      already_in_xtask: true
    - name: serde_yaml
      version: "0.9.x"
      purpose: "YAML parsing for hypothesis and evidence bundles"
      already_in_xtask: true
    - name: xshell
      version: "0.2.x"
      purpose: "Command execution for AAT agent invocation and gh CLI integration"
      already_in_xtask: true
    removed_dependencies:
      rationale: |
        tree-sitter (0.20.x) and octocrab (0.32.x) are removed from the
        implementation approach. Instead, static analysis uses regex patterns
        for anti-gaming detection. GitHub API interactions use the gh CLI
        command-line tool via xshell, which is already available in CI/CD
        environments and doesn't require credential management in code.
      external_tools:
      - name: gh
        description: "GitHub CLI for PR information retrieval and status check updates"
        invocation: "xshell::cmd!(gh api ...)"
        already_available: true
