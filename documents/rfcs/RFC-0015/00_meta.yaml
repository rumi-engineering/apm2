rfc_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  rfc:
    id: RFC-0015
    title: "Forge Admission Cycle (FAC) - Hardened Protocol with Cryptographic Gates and OCAP Containment"
    status: DRAFT
    created_date: "2026-01-29"
    last_updated_date: "2026-01-29"
    version: "v4"
    version_history:
      - version: "v0"
        date: "2026-01-29"
        phase: "v0 (Discovery)"
        notes: "Initial RFC creation from PRD-0009"
      - version: "v2"
        date: "2026-01-29"
        phase: "v2 (Grounded)"
        notes: |
          EXPLORE council session completed. Design decisions grounded in codebase evidence.
          Q-RFC-FAC-0001 resolved: extend kernel_events.proto (not new fac_events.proto).
          Q-RFC-FAC-0002 resolved: ContextAwareValidator middleware at tool validation layer.
          Q-RFC-FAC-0005 resolved: reuse TranscriptChunk from CAC module.
          Pattern alignment score: 6.2/10 (upgraded from LOW to MEDIUM confidence).
          3 critical security gaps identified; all remediable within v4 phase.
      - version: "v4"
        date: "2026-01-29"
        phase: "v4 (Converged)"
        notes: |
          FINALIZE council session completed (SA-1 Structural Rigorist).
          All 6 HYPOTHESIS decisions upgraded to VALIDATED:
          - DD-FAC-0004: Projection-Only GitHub (score 3.55)
          - DD-FAC-0005: Evidence-Backed CI Import (score 4.00)
          - DD-FAC-0006: Typed AAT GateReceipt (score 4.55)
          - DD-FAC-0007: Terminal Verifier Binding (score 3.55)
          - DD-FAC-0008: Risk-Tiered AAT Selection (score 3.55)
          - DD-FAC-0009: AAT Anti-Downgrade (score 5.00)
          All 6 open questions resolved or explicitly deferred:
          - Q-RFC-FAC-0003: KeyPolicy artifact schema defined
          - Q-RFC-FAC-0004: Deferred to Phase 2 (L0 policy for Phase 1)
          - Q-RFC-FAC-0006: Determinism N by tier defined (HIGH=3, MED=2, LOW=1)
          - Q-RFC-FAC-0007: Risk classification model defined
          - Q-RFC-FAC-0009: AAT reuse LOW-only; MED requires waiver
          - Q-RFC-FAC-0010: GitHub branch protection contract specified
          All 4 security findings resolved:
          - F-SA3-001: LeaseRevoked event + TTL reduction
          - F-SA3-002: WARN duration 7 days + sensitive module exclusion
          - F-SA3-004: Runtime policy enforcement for TB-0003
          - F-SA3-012: ADV-0005 threat model + dual-control
          Mean decision score: 4.08/5.0 (all above 3.5 threshold).
          Overall v4 readiness: 85%. Ready for DECOMPOSE phase.
    abstract: |
      This RFC specifies the Forge Admission Cycle (FAC), an internal cryptographically-enforced
      admission protocol for APM2. FAC ensures that all gate outcomes are signed by authorized
      executors under lease-scoped authority, GitHub is treated as a projection target rather
      than a source of truth, and consumption holons operate under mechanical OCAP context
      firewalls. The protocol addresses failure modes including status spoofing, gate outcome
      forgery, context leakage, and projection divergence. FAC implements evidence-backed CI
      import, typed AAT gate receipts with terminal verifier binding, risk-tiered AAT selection,
      and anti-downgrade invariants. The design ensures that admission is impossible to spoof
      and every decision is replayable from ledger+CAS under strict OCAP.
  binds_to_prd:
    prd_id: PRD-0009
    prd_base_path: "documents/prds/PRD-0009/"
    requirement_registry_ref: "documents/prds/PRD-0009/requirements/"
    evidence_bundle_ref: "documents/prds/PRD-0009/12_evidence_bundle.yaml"
    prd_meta_ref: "documents/prds/PRD-0009/00_meta.yaml"
    rationale: "Initiates RFC v0 discovery for FAC Core Hardening requirements"
  protocol_profile:
    id: FAC-PROTOCOL-001
    applies: true
    inherited_from_prd: true
    time_horizon: "Phase 1 -> Phase 3 (then autonomous self-improvement expected)"
    profile_ref: "documents/prds/PRD-0009/00_meta.yaml#protocol_profile"
  custody:
    owner_holons:
      - holon_id: HOLON-KERNEL-GOVERNANCE
        role: "Critical event signing, authority minting, key policy"
      - holon_id: HOLON-KERNEL-GATE
        role: "Gate receipt verification, admission decision, merge receipt"
      - holon_id: HOLON-COORDINATOR
        role: "CAS-at-commit orchestration, bounded retries, echo-trap detection"
      - holon_id: HOLON-CONTEXT-COMPILER
        role: "CCP/RCP compilation, impact expansion, ZTI scoring"
      - holon_id: HOLON-GITHUB-ADAPTER
        role: "Projection-only sync + divergence watchdog"
      - holon_id: HOLON-AAT
        role: "AAT gate execution with evidence binding and terminal verifiers"
    producing_agent_roles:
      - AGENT_AUTHOR
      - AGENT_ARCHITECT
    responsible_domains:
      - DOMAIN_KERNEL
      - DOMAIN_FORGE
      - DOMAIN_ADMISSION
      - DOMAIN_PROJECTION
      - DOMAIN_SECURITY
    authority_signoffs_required:
      - AUTH_PRODUCT
      - AUTH_SECURITY
      - AUTH_ARCHITECTURE
  refs:
    standards:
      requirement_schema: "standards/schemas/02_requirement.schema.yaml#requirement_schema"
      evidence_artifact_schema: "standards/schemas/01_evidence_artifact.schema.yaml#evidence_artifact_schema"
      quality_coverage_schema: "standards/schemas/03_quality_coverage.schema.yaml#quality_coverage_schema"
      gate_review_schema: "standards/schemas/06_gate_review.schema.yaml#gate_review_schema"
      waiver_schema: "standards/schemas/05_waiver.schema.yaml#waiver_schema"
      ticket_meta_schema: "standards/schemas/04_ticket_meta.schema.yaml#ticket_meta_schema"
      lint_spec: "standards/lint/LINT_SPEC.yaml#lint_spec"
    laws:
      - id: LAW-01
        name: "Receipt-Backed Gate for Authoritative Promotion"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_01.md"
      - id: LAW-02
        name: "ZTI-Configured Context Supply"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_02.md"
      - id: LAW-03
        name: "Monotone Ledger vs. Overwritable Projection"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_03.md"
      - id: LAW-04
        name: "Stochastic Stability Contracts"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_04.md"
      - id: LAW-05
        name: "OCAP and Capability Scoping"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_05.md"
      - id: LAW-10
        name: "Anti-Entropy & Merge Semantics"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_10.md"
      - id: LAW-12
        name: "Termination Guarantees"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_12.md"
      - id: LAW-15
        name: "Measurement Integrity"
        ref: "documents/skills/laws-of-holonic-agent-systems/references/law_15.md"
    related_documents:
      glossary: "documents/skills/glossary/SKILL.md"
      laws: "documents/skills/laws-of-holonic-agent-systems/SKILL.md"
      work_substrate: "documents/prds/PRD-0004/"
      cac_substrate: "documents/prds/PRD-0007/"
  implementation:
    language: Rust
    edition: "2024"
    rust_version: "1.85"
    primary_crates:
      - apm2-core
      - apm2-daemon
    new_modules:
      - path: "crates/apm2-core/src/fac/"
        purpose: "FAC protocol implementation"
      - path: "crates/apm2-core/src/gate/"
        purpose: "Gate execution and receipt generation"
      - path: "crates/apm2-daemon/src/projection/"
        purpose: "GitHub projection and divergence watchdog"
    key_dependencies:
      - name: ed25519-dalek
        version: "2.x"
        purpose: "Ed25519 signatures for gate outcomes and receipts"
      - name: blake3
        version: "1.x"
        purpose: "Content addressing and hash chains"
      - name: tokio
        version: "1.x"
        purpose: "Async runtime for gate execution"
    proto_files:
      - path: "proto/kernel_events.proto"
        purpose: "Extended with GateLeaseIssued, GateRunStarted, GateRunCompleted payloads"
        status: EXTEND
      - path: "proto/fac_events.proto"
        purpose: "New FAC-specific event shapes (optional placement)"
        status: NEW
