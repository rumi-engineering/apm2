evidence_artifact:
  schema_version: "2026-01-23"
  id: "EVID-0012"
  title: "RoleSpec vNext production selection and spawn-lineage evidence"
  category: "INTEGRATION_TEST_RESULT"
  status: "COMPLETE"
  description: |
    Evidence that WorkObject execution resolves the authoritative
    `fac_workobject_implementor_v2` RoleSpec by hash and binds that role hash
    through production claim/spawn lifecycle events.

    Coverage includes fail-closed denial behavior when role profile lineage is
    ambiguous or broken.
  requirement_ids:
    - "REQ-0017"
    - "REQ-0019"
  source_refs:
    - "documents/rfcs/RFC-0019/requirements/REQ-0017.yaml"
    - "documents/rfcs/RFC-0019/requirements/REQ-0019.yaml"
    - "crates/apm2-daemon/tests/tck_00437_rolespec_vnext.rs"
  artifacts:
    - type: "integration_test"
      path: "crates/apm2-daemon/tests/tck_00437_rolespec_vnext.rs"
      description: |
        `tck_00437_rolespec_vnext_hash_lineage_and_spawn_binding` verifies
        authoritative role hash selection and role hash propagation into
        `work_claimed` + `session_started` events.
    - type: "integration_test"
      path: "crates/apm2-daemon/tests/tck_00437_rolespec_vnext.rs"
      description: |
        `tck_00437_rolespec_vnext_spawn_fails_closed_on_role_context_ambiguity`
        verifies deny-by-default behavior for ambiguous/mismatched role profile
        lineage on the production spawn path.
    - type: "implementation"
      path: "crates/apm2-daemon/src/protocol/dispatch.rs"
      description: |
        Production lineage enforcement: `resolve_workobject_role_spec_hash`,
        `validate_claim_authority_context_lineage`, and spawn-time fail-closed
        authority-context denials.
    - type: "implementation"
      path: "crates/apm2-core/src/fac/builtin_roles.rs"
      description: |
        Authoritative RoleSpec vNext contract (`fac_workobject_implementor_v2`)
        and deterministic canonical hash source.
