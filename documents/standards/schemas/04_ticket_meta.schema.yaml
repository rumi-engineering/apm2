ticket_meta_schema:
  schema_version: "2026-01-23"
  schema_id: "SCHEMA_TICKET_META_V1"
  required_keys:
    - "ticket"
    - "binds"
    - "custody"
    - "definition_of_done"
  keys:
    ticket:
      type: "object"
      required_keys:
        - "id"
        - "title"
        - "status"
      keys:
        id:
          type: "string"
          pattern_ref: "standards_meta.determinism.canonical_id_formats.ticket_id"
        title:
          type: "string"
          min_length: 3
        status:
          type: "string"
          enum_ref: "standards/enums/10_ticket_status.yaml#ticket_status.values"
    binds:
      type: "object"
      required_keys:
        - "prd_id"
        - "rfc_id"
        - "requirements"
        - "evidence_artifacts"
      keys:
        prd_id:
          type: "string"
          pattern_ref: "standards_meta.determinism.canonical_id_formats.prd_id"
        rfc_id:
          type: "string"
          pattern_ref: "standards_meta.determinism.canonical_id_formats.rfc_id"
        requirements:
          type: "array"
          item_type: "object"
          min_items: 1
          object_required_keys:
            - "requirement_id"
            - "requirement_ref"
          object_keys:
            requirement_id:
              type: "string"
              pattern_ref: "standards_meta.determinism.canonical_id_formats.requirement_id"
            requirement_ref:
              type: "string"
              pattern_ref: "standards_meta.determinism.canonical_id_formats.ref_string"
        evidence_artifacts:
          type: "array"
          item_type: "object"
          min_items: 1
          object_required_keys:
            - "evidence_id"
            - "artifact_ref"
          object_keys:
            evidence_id:
              type: "string"
              pattern_ref: "standards_meta.determinism.canonical_id_formats.evidence_id"
            artifact_ref:
              type: "string"
              pattern_ref: "standards_meta.determinism.canonical_id_formats.ref_string"
    custody:
      type: "object"
      required_keys:
        - "agent_roles"
        - "responsibility_domains"
      keys:
        agent_roles:
          type: "array"
          item_type: "string"
          min_items: 1
          enum_ref: "standards/enums/07_custody_roles.yaml#custody_roles.values"
        responsibility_domains:
          type: "array"
          item_type: "string"
          min_items: 1
          enum_ref: "standards/enums/08_responsibility_domains.yaml#responsibility_domains.values"
    dependencies:
      type: "object"
      required_keys:
        - "tickets"
      keys:
        tickets:
          type: "array"
          item_type: "object"
          default: []
          object_required_keys:
            - "ticket_id"
            - "reason"
          object_keys:
            ticket_id:
              type: "string"
              pattern_ref: "standards_meta.determinism.canonical_id_formats.ticket_id"
            reason:
              type: "string"
    definition_of_done:
      type: "object"
      required_keys:
        - "evidence_ids"
      keys:
        evidence_ids:
          type: "array"
          item_type: "string"
          min_items: 1
