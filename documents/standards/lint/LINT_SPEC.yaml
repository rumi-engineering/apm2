lint_spec:
  schema_version: "2026-01-23"
  lint_rules:
  lint_id: "LINT_SPEC_V2"
  posture:
    default: "FAIL_CLOSED"
    rationale: "Underspecification and unresolved references are treated as blocking defects unless explicitly waived with authority."
  document_modes:
    template:
      detection:
        path_contains: "/template/"
      allowances:
        allow_empty_strings: true
        allow_empty_arrays: true
        allow_unresolved_refs: true
    instance:
      detection:
        default: true
      allowances:
        allow_empty_strings: false
        allow_empty_arrays: false
        allow_unresolved_refs: false
  global_rules:
    - id: "LINT-0001"
      scope: "ALL_YAML"
      description: "YAML MUST parse and MUST NOT contain tabs."
      severity: "ERROR"
    - id: "LINT-0002"
      scope: "ALL_YAML"
      description: "All YAML files MUST include exactly one root key."
      severity: "ERROR"
    - id: "LINT-0003"
      scope: "ALL_DOCS"
      description: "IDs MUST match canonical patterns defined in standards/00_standards_meta.yaml."
      severity: "ERROR"
    - id: "LINT-0004"
      scope: "ALL_DOCS"
      description: "All cross-file references MUST resolve (path + yaml_root_key [+ optional dot_subpath])."
      severity: "ERROR"
    - id: "LINT-0005"
      scope: "INSTANCE_DOCS"
      description: "Placeholders (TBD, TODO, FIXME, ???) are forbidden in required fields."
      severity: "ERROR"
    - id: "LINT-0006"
      scope: "ALL_MARKDOWN"
      description: "Markdown tables are forbidden (no '|' table rows)."
      severity: "ERROR"
    - id: "LINT-0007"
      scope: "PRD"
      description: "Every PRD requirement MUST have >=1 acceptance criterion and >=1 evidence_id."
      severity: "ERROR"
    - id: "LINT-0008"
      scope: "EVIDENCE_ARTIFACTS"
      description: "Every evidence artifact MUST have >=1 verification command and >=1 capture path; every command MUST declare network_access."
      severity: "ERROR"
    - id: "LINT-0009"
      scope: "QUALITY_FRAMEWORK"
      description: "Every quality dimension MUST appear exactly once and be APPLIES or DOES_NOT_APPLY; DOES_NOT_APPLY requires exception.requested=true and required_signoffs."
      severity: "ERROR"
    - id: "LINT-0010"
      scope: "RFC"
      description: "RFC MUST bind to a PRD and MUST NOT redefine PRD requirements; RFC-only requirements MUST be additive and must define new evidence."
      severity: "ERROR"
    - id: "LINT-0011"
      scope: "TICKETS"
      description: "Every ticket MUST reference at least one requirement and at least one evidence artifact; DoD evidence MUST resolve to evidence artifacts."
      severity: "ERROR"
    - id: "LINT-0012"
      scope: "PROTOCOL_PROFILES"
      description: "If a protocol profile applies, PRD and RFC MUST import the profile's required requirements/evidence and required RFC sections."
      severity: "ERROR"
  determinism_rules:
    - id: "LINT-0101"
      description: "Lists named ids, requirement_ids, evidence_ids, decision_ids, ticket_ids MUST be lexicographically sorted."
      severity: "ERROR"
    - id: "LINT-0102"
      description: "Object lists with a primary key (id, gate_id, ticket_id, requirement_id) MUST be sorted by that key."
      severity: "ERROR"
    - id: "LINT-0103"
      description: "Duplicate IDs in the same logical namespace are forbidden."
      severity: "ERROR"
  waiver_rules:
    - id: "LINT-0201"
      description: "Waivers are allowed only in explicit waiver records with required authority signoffs; waivers MUST include rationale and expiration_date."
      severity: "ERROR"
    - id: "LINT-0202"
      description: "A WAIVED gate_status MUST reference an approved waiver_id whose scope includes the gate_id."
      severity: "ERROR"
    - id: "LINT-0203"
      description: "Expired waivers are forbidden."
      severity: "ERROR"
  clutter_prevention_rules:
    - id: "LINT-0013"
      scope: "RUST_MODULES"
      description: "New modules (mod.rs files not in git HEAD) MUST have RFC justification in CCP."
      severity: "ERROR"
      rationale: "Prevents arbitrary module sprawl by requiring deliberate, documented decisions for new code organization."
    - id: "LINT-0014"
      scope: "RUST_TYPES"
      description: "Warn when struct/trait definitions exceed 0.8 similarity (Levenshtein names + structural fields)."
      severity: "WARNING"
      rationale: "Detects cousin abstractions that should be unified or explicitly distinguished."
    - id: "LINT-0015"
      scope: "RUST_PUB_ITEMS"
      description: "New pub items (fn, struct, trait, mod) MUST have a deletion/migration plan in the associated RFC."
      severity: "ERROR"
      rationale: "Forces consideration of API surface lifetime to prevent permanent clutter accumulation."
  htf_time_rules:
    - id: "LINT-0016"
      scope: "NORMATIVE_DOCS"
      description: "Human time units (minutes, hours, days, weeks, months, years, ASAP, EOD, EOW, EOY, next week/month/quarter) are forbidden in normative documents unless explicitly marked external."
      severity: "ERROR"
      rationale: "Enforces HTF (Holonic Time Fabric) requirement REQ-HTF-0006: normative artifacts MUST use tick-based or ledger-based time, not human wall-time units."
      scoped_paths:
        - "documents/prds/**"
        - "documents/rfcs/**"
        - "documents/skills/**"
        - "documents/laws/**"
      reject_patterns:
        - "\\b\\d+\\s*(seconds?|minutes?|hours?|days?|weeks?|months?|years?)\\b"
        - "\\b(ASAP|EOD|EOW|EOY)\\b"
        - "\\bnext\\s+(week|month|quarter|year)\\b"
      escape_hatch:
        prefix: "EXTERNAL_TIME:"
        metadata_key: "external_time"
        rationale: "Explicit escape for external-facing contexts (user notifications, SLAs, display formatting)."
