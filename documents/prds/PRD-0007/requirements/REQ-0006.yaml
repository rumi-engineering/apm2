prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "REQ-0006"
  type: "FUNCTIONAL"
  title: "Messaging-native control plane compatibility"
  statement: |
    CAC actions (admission, compilation, export, selftest) MUST be reflected in kernel
    messages (ledger events) with hash references. Holons MUST be able to negotiate
    capabilities and retrieve required context via stable IDs referenced in messages.
  acceptance_criteria:
    - "CAC actions emit kernel messages with hash references. Verified by: EvidencePublished events include dcp_id, artifact_kind, schema_id metadata."
    - "Holons can negotiate capabilities via stable IDs. Verified by: Agent obtains CapabilityManifest by stable_id and verifies AATReceipt."
    - "Context retrieval uses stable IDs from messages. Verified by: ArtifactFetch accepts stable_id from message metadata."
  evidence:
    evidence_ids:
      - EVID-0007
