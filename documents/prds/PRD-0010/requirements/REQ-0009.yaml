prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "REQ-0009"
  type: "PERFORMANCE"
  source_id: "DCP-G-0001"
  title: "Spawn Acknowledgment Latency"
  statement: |
    apm2-daemon spawn_ack_latency (session_id returned) MUST be <100ms p99; measured
    on local Unix socket IPC with daemon warm, excluding external policy resolution
    network calls.
  acceptance_criteria:
    - "Spawn acknowledgment completes in <100ms p99 under benchmark conditions. Verified by: Benchmark results show p99 < 100ms."
    - "Measurement excludes external network calls (policy resolution). Verified by: Benchmark methodology documents exclusion."
    - "Benchmark runs with daemon warm (not cold start). Verified by: Benchmark includes warm-up phase."
    - "Results include p50, p90, p99 percentiles. Verified by: Benchmark output includes all percentiles."
  evidence:
    evidence_ids:
      - EVID-0009
  law_alignment:
    - law_id: "LAW-06"
      enforcement: "MDL as Gated Budget: Bounded latency for control plane operations"
      applies_to:
        - "SpawnEpisode IPC"
  defect_codes:
    - code: "SPAWN_LATENCY_EXCEEDED"
      severity: "S2"
      description: "Spawn acknowledgment exceeded 100ms p99"
