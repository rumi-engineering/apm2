prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "REQ-COORD-0004"
  type: "FUNCTIONAL"
  title: "Serial execution loop"
  statement: |
    CoordinationController MUST implement a serial execution loop that processes
    work items sequentially. At most one agent session MUST be active per coordination
    at any time. The controller MUST spawn the next session only after the current
    session terminates. The loop MUST terminate when the work queue is exhausted or
    a stop condition is met.
  acceptance_criteria:
    - "At most one active session per coordination. Verified by: State inspection shows single active binding at any time."
    - "Sequential processing. Verified by: Event sequence shows session_unbound precedes next session_bound."
    - "Work queue order preserved. Verified by: Work items processed in queue order (no reordering)."
    - "Loop terminates on queue exhaustion. Verified by: Empty queue triggers WORK_COMPLETED stop condition."
  evidence:
    evidence_ids:
      - EVID-COORD-0004
      - EVID-COORD-0006
    inherited_from_prd: false
    notes:
      - "CNS-COORD-0003 constrains to serial execution for MVP."
      - "Parallel execution deferred to Phase 2."
      - "EVID-COORD-0004 covers work freshness check executed as part of serial loop."
