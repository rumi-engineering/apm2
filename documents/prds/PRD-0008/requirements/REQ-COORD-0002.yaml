prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "REQ-COORD-0002"
  type: "FUNCTIONAL"
  title: "Work-session binding events"
  statement: |
    Coordination MUST emit work-session binding events to create and release
    relationships between work items and agent sessions. coordination.session_bound
    MUST be emitted before session spawn, linking work_id to session_id.
    coordination.session_unbound MUST be emitted on session termination, recording
    the outcome (success, failure, timeout). Binding state MUST be queryable from
    the coordination projection.
  acceptance_criteria:
    - "coordination.session_bound event emitted before session spawn. Verified by: Event sequence shows bound event precedes session.started for same session_id."
    - "coordination.session_unbound event emitted on termination. Verified by: Every bound event has matching unbound event with outcome."
    - "Binding state is queryable. Verified by: Coordination projection API returns active bindings by coordination_id."
    - "Binding includes work_id, session_id, and attempt_number. Verified by: Event schema validation."
  evidence:
    evidence_ids:
      - EVID-COORD-0006
    inherited_from_prd: false
    notes:
      - "INV-COORD-0002 ensures every bound session is eventually unbound."
