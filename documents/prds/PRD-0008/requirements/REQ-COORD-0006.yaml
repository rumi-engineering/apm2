prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "REQ-COORD-0006"
  type: "FUNCTIONAL"
  title: "CLI command (apm2 coordinate)"
  statement: |
    The APM2 CLI MUST provide a `coordinate` command for starting coordination
    sessions. The command MUST accept work queue specification (--work-ids or
    --work-query) and budget configuration (--max-episodes, --max-duration-ms).
    The command MUST emit structured progress events during execution. The command
    MUST return the coordination receipt on completion.
  acceptance_criteria:
    - "Command accepts work queue via --work-ids or --work-query. Verified by: CLI parses both options correctly."
    - "Command requires budget parameters. Verified by: CLI rejects invocation without --max-episodes and --max-duration-ms."
    - "Progress events emitted during execution. Verified by: Structured JSON events output during coordination."
    - "Receipt returned on completion. Verified by: Command output includes receipt JSON with all required fields."
    - "Machine-readable output. Verified by: All output parseable as structured JSON."
  evidence:
    evidence_ids:
      - EVID-COORD-0007
    inherited_from_prd: false
    notes:
      - "CLI integration enables programmatic coordination control."
