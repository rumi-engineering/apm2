prd_evidence_artifact:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: "EVID-COORD-0005"
  category: "REDUCER_DETERMINISM_RESULTS"
  title: "CoordinationReducer determinism and pattern compliance"
  description: |
    Validates that CoordinationReducer is deterministic through property tests
    comparing replay-from-genesis with replay-from-checkpoint. Verifies adherence
    to established reducer patterns.
  capture:
    paths:
      - "evidence/coordination/reducer/"
  verification:
    commands:
      - id: "CMD-COORD-0005-01"
        shell: "bash"
        command: "cargo test --package apm2-core --lib coordination::reducer::tests::determinism"
        expected_exit_code: 0
        cwd: "."
        timeout_seconds: 600
        network_access: "DISALLOWED"
        allowlist_hosts: []
        constraints:
          - "Property test: replay-from-genesis = replay-from-checkpoint"
          - "Golden event sequences committed"
      - id: "CMD-COORD-0005-02"
        shell: "bash"
        command: "cargo test --package apm2-core --lib coordination::reducer::tests::checkpoint"
        expected_exit_code: 0
        cwd: "."
        timeout_seconds: 300
        network_access: "DISALLOWED"
        allowlist_hosts: []
        constraints:
          - "Test checkpoint save/restore"
          - "Test incremental replay"
      - id: "CMD-COORD-0005-03"
        shell: "bash"
        command: "cargo test --package apm2-core --lib coordination::reducer::tests::event_correlation"
        expected_exit_code: 0
        cwd: "."
        timeout_seconds: 300
        network_access: "DISALLOWED"
        allowlist_hosts: []
        constraints:
          - "Test coordination_id in all events"
          - "Test event rejection on missing correlation"
  data:
    classification: "INTERNAL"
    redaction:
      required: false
      guidance: []
