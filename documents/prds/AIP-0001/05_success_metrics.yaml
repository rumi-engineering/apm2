prd_success_metrics:
  version: 1

  outcome_metrics:
    - id: "METRIC-0001"
      name: "gRPC API completeness"
      baseline: "0 services"
      target: "3 services (AgentService, SessionService, MetricsService) fully implemented"
      measurement_window: "Release v0.2.0"
      source_of_truth: "Proto files and integration tests"
    - id: "METRIC-0002"
      name: "Client language support"
      baseline: "1 (Rust)"
      target: "Any language with gRPC support can generate clients"
      measurement_window: "Release v0.2.0"
      source_of_truth: "Published proto files"
    - id: "METRIC-0003"
      name: "Terminal emulation fidelity"
      baseline: "No ANSI support (stdio pipes)"
      target: "Full PTY support with ANSI, resize, signals"
      measurement_window: "Release v0.2.0"
      source_of_truth: "E2E tests with ANSI sequences"
    - id: "METRIC-0004"
      name: "Session data capture"
      baseline: "No session tracking"
      target: "100% of turns and tool calls captured in structured format"
      measurement_window: "Release v0.2.0"
      source_of_truth: "Integration tests comparing input/output with session queries"

  quality_metrics:
    - id: "SLO-0001"
      name: "Message routing latency"
      sli: "Time from SendInput call to bytes written to agent PTY"
      objective: "<10ms p99"
      window: "Per release"
      alerting_required: false
    - id: "SLO-0002"
      name: "Output streaming latency"
      sli: "Time from agent PTY output to client receiving StreamOutput chunk"
      objective: "<20ms p99"
      window: "Per release"
      alerting_required: false
    - id: "SLO-0003"
      name: "gRPC server availability"
      sli: "Percentage of time gRPC server accepts connections"
      objective: "99.9% during daemon uptime"
      window: "Per session"
      alerting_required: false

  adoption_metrics:
    - id: "ADOPT-0001"
      name: "Unix socket deprecation"
      baseline: "100% of operations via Unix socket"
      target: "0% Unix socket usage (deprecated)"
      window: "v0.3.0"
      source_of_truth: "Daemon logs"
    - id: "METRIC-0005"
      name: "Real-time event consumers"
      baseline: "0"
      target: "WatchSession and StreamOutput RPCs functional"
      measurement_window: "Release v0.2.0"
      source_of_truth: "Integration tests"
    - id: "METRIC-0006"
      name: "Metrics emission"
      baseline: "No metrics"
      target: "CPU, memory, uptime, turn count, tool call counts per agent"
      measurement_window: "Release v0.2.0"
      source_of_truth: "MetricsService integration tests"
