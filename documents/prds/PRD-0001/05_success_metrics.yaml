prd_success_metrics:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  metrics:
  - id: MET-0001
    name: End-to-end cycle time (spec to merge)
    description: Ledger-window span from factory command invocation to merged change
      for a bounded-scope work item. Primary axis is (ledger_id, epoch, seq) delta
      between WORK.OPENED and WORK.COMPLETED events.
    baseline: Manual engineering baseline varies; for comparison record current median
      human cycle time for similar changes (wall time, observational only).
    target: Reduce median cycle time by â‰¥10x for bounded changes while maintaining
      evidence completeness and no safety regressions. Measured in ledger sequence
      delta; wall-time overlay is bounded and non-authoritative.
    measurement_method: 'Compute from ledger events: WORK.OPENED to WORK.COMPLETED
      plus merge event; primary index by (ledger_id, epoch, seq) windows. Wall-time
      overlay derived from TimeEnvelope bounded intervals (observational).'
    evidence_ids:
    - EVID-0011
    - EVID-0018
  - id: MET-0002
    name: Evidence completeness rate
    description: Fraction of completed work items whose evidence bundle satisfies
      all required evidence bindings without waivers.
    baseline: 0% prior to system enforcement.
    target: '>=95% of completed work items satisfy evidence bindings without waivers;
      waivers are explicit and rare.'
    measurement_method: Project evidence index and compare evidence_ids vs
      published evidence bundles.
    evidence_ids:
    - EVID-0002
    - EVID-0011
  - id: MET-0003
    name: Duplicate work rate
    description: Rate of conflicting leases or duplicate claims per 100 work items.
    baseline: Unknown; typically high in ad hoc agent swarms.
    target: <1 conflicting lease per 100 work items under normal conditions; conflicts
      are explicit and resolved deterministically.
    measurement_method: Count lease conflict events and adjudication triggers from
      ledger projections.
    evidence_ids:
    - EVID-0006
    - EVID-0011
  - id: MET-0004
    name: Policy deny and violation rate
    description: Frequency of denied tool requests and policy violations per work
      item.
    baseline: Undefined in uncontrolled systems.
    target: Policy denies occur as guardrails, but violations trend downward over
      time; violations <0.1 per work item in steady state.
    measurement_method: Count TOOL.DECIDED=DENY and POLICY.VIOLATION events per work_id
      and export trends.
    evidence_ids:
    - EVID-0003
    - EVID-0011
  - id: MET-0005
    name: Mean tick delta to detect and remediate stall
    description: Tick delta from last progress signal to remediation action (restart/quarantine/failover)
      for stalled sessions. Primary axis is MonotonicTicks (M) delta.
    baseline: Manual detection baseline measured in wall time (observational only).
    target: Detect stalls within configured tick threshold and remediate within
      bounded tick delta thereafter. Wall-time overlay is observational only.
    measurement_method: Compute tick delta from session heartbeat/progress events and supervisor
      remediation events. Primary index by tick deltas; wall-time overlay is bounded.
    evidence_ids:
    - EVID-0006
    - EVID-0011
  - id: MET-0006
    name: Cost per merged change
    description: Attributed compute and inference cost per merged change (tokens,
      CPU/GPU time, external calls).
    baseline: Unknown; commonly uncontrolled in agent systems.
    target: Provide deterministic accounting; optimize over time with budgets and
      profiles while maintaining quality.
    measurement_method: Accumulate budgets and usage events per work_id and export
      cost reports.
    evidence_ids:
    - EVID-0018
  guardrails:
  - id: GRD-0001
    name: No unauthorized side effects
    threshold: 0 successful unauthorized tool executions; any detected bypass triggers
      quarantine and incident workflow.
    response_plan: Quarantine offending session/node, revoke leases, require governance
      review and remediation ticket.
    evidence_ids:
    - EVID-0003
    - EVID-0004
  - id: GRD-0002
    name: No silent skips of evidence obligations
    threshold: 0 completed work items missing required evidence without an approved
      waiver.
    response_plan: Block completion, open NEEDS_INPUT, and create follow-up ticket
      to produce missing evidence or request waiver.
    evidence_ids:
    - EVID-0002
    - EVID-0016
  - id: GRD-0003
    name: Bounded resource burn
    threshold: Budgets must prevent unbounded loops; no single work item may exceed
      configured max tick budget or token budgets without explicit governance action.
      Tick budgets are authoritative; wall-time budgets are observational only.
    response_plan: Terminate stalled sessions, release leases, open adjudication work
      if repeated, tighten policy.
    evidence_ids:
    - EVID-0006
    - EVID-0018
  - id: GRD-0004
    name: Schema and protocol compatibility window enforcement
    threshold: 0 successful peer handshakes outside supported compatibility window.
    response_plan: Reject incompatible peers with reason codes; open migration work
      and update compatibility tests.
    evidence_ids:
    - EVID-0008
