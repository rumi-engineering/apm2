prd_evidence_standards:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  evidence_policy_id: "EVIDENCE_POLICY_V2"
  requirements:
    - id: "EPOL-0001"
      statement: "Every PRD requirement MUST map to one or more evidence artifacts with reproducible verification commands."
    - id: "EPOL-0002"
      statement: "Evidence artifacts MUST declare data classification and redaction guidance; RESTRICTED evidence MUST set redaction.required=true and include redaction steps."
    - id: "EPOL-0003"
      statement: "Evidence capture paths MUST be deterministic and relative to the evidence bundle root; artifacts are content-addressed where feasible."
    - id: "EPOL-0004"
      statement: "All evidence verification commands MUST declare network_access; default is DISALLOWED and any exception must be allow-listed by policy."
    - id: "EPOL-0005"
      statement: "Evidence MUST be sufficient for independent replay: a verifier can re-run verification commands using only referenced artifacts, spec snapshots, and declared environment prerequisites."
    - id: "EPOL-0006"
      statement: "Gate Receipts as Compression: Gate reviews MUST use minimal, opinionated schemas that serve as machine-readable receipts pointing to artifacts; 80-95% of receipt content SHOULD be auto-generated by the harness."
    - id: "EPOL-0007"
      statement: "Evidence Profiles: The depth of required evidence is determined by profile (e.g., DEV_FAST vs HIGH_ASSURANCE); default profiles optimize for throughput while maintaining safety."
  minimum_categories_by_requirement_type:
    FUNCTIONAL:
      - "TEST_RESULTS"
    NON_FUNCTIONAL:
      - "TEST_RESULTS"
    INTEROPERABILITY:
      - "INTEGRATION_TEST_RESULTS"
    SECURITY:
      - "SECURITY_SCAN_RESULTS"
      - "THREAT_MODEL_ARTIFACTS"
    COMPLIANCE:
      - "POLICY_CHECK_RESULTS"
      - "AUDIT_LOGS"
    OPERABILITY:
      - "CONFIG_SNAPSHOTS"
      - "BUILD_ARTIFACTS"
    OBSERVABILITY:
      - "METRICS_DASHBOARDS"
      - "OBSERVABILITY_TRACES"
    PERFORMANCE:
      - "BENCHMARK_RESULTS"
      - "LOAD_TEST_RESULTS"
    RELIABILITY:
      - "INTEGRATION_TEST_RESULTS"
    DATA_GOVERNANCE:
      - "AUDIT_LOGS"
      - "POLICY_CHECK_RESULTS"
    COST:
      - "METRICS_DASHBOARDS"
    UX:
      - "TEST_RESULTS"
      - "RECORDINGS"
  acceptable_evidence_types:
    TEST_RESULT:
      description: "Output from automated test suites with pass/fail status"
      required_fields:
        - "test_suite_id"
        - "execution_timestamp"
        - "pass_count"
        - "fail_count"
        - "test_output_artifact"
      verification_reproducible: true
    FORMAL_PROOF:
      description: "Machine-checked formal verification proofs"
      required_fields:
        - "proof_artifact"
        - "theorem_statement"
        - "proof_checker_version"
        - "verification_command"
      verification_reproducible: true
    SECURITY_AUDIT:
      description: "Security scan results and penetration test reports"
      required_fields:
        - "scan_tool_id"
        - "scan_timestamp"
        - "findings_artifact"
        - "severity_summary"
      verification_reproducible: true
    THREAT_MODEL_ARTIFACT:
      description: "Threat models with identified threats and mitigations"
      required_fields:
        - "threat_model_artifact"
        - "threat_count"
        - "mitigation_coverage"
      verification_reproducible: false
      review_required: true
    INTEGRATION_TEST_RESULT:
      description: "Results from integration tests across components"
      required_fields:
        - "test_suite_id"
        - "components_tested"
        - "execution_timestamp"
        - "pass_count"
        - "fail_count"
        - "test_output_artifact"
      verification_reproducible: true
    BENCHMARK_RESULT:
      description: "Performance benchmark outputs with metrics"
      required_fields:
        - "benchmark_id"
        - "execution_timestamp"
        - "metrics_artifact"
        - "baseline_comparison"
      verification_reproducible: true
    POLICY_CHECK_RESULT:
      description: "Policy validation outputs from automated checks"
      required_fields:
        - "policy_id"
        - "check_timestamp"
        - "violations"
        - "check_output_artifact"
      verification_reproducible: true
    AUDIT_LOG:
      description: "Tamper-evident logs of system events"
      required_fields:
        - "log_artifact"
        - "time_range"
        - "event_count"
        - "integrity_hash"
      verification_reproducible: false
      retention_required: true
    CONFIG_SNAPSHOT:
      description: "Configuration file snapshots with version info"
      required_fields:
        - "config_artifact"
        - "snapshot_timestamp"
        - "config_hash"
      verification_reproducible: false
    BUILD_ARTIFACT:
      description: "Build outputs with provenance metadata"
      required_fields:
        - "artifact_path"
        - "build_timestamp"
        - "build_command"
        - "artifact_hash"
      verification_reproducible: true
    DESIGN_REVIEW:
      description: "Design review documents with approvals"
      required_fields:
        - "review_artifact"
        - "reviewers"
        - "approval_status"
        - "review_date"
      verification_reproducible: false
      review_required: true
    CHANGELOG_ENTRY:
      description: "Changelog entries documenting changes"
      required_fields:
        - "changelog_artifact"
        - "change_description"
        - "change_timestamp"
      verification_reproducible: false
    RECORDING:
      description: "Screen recordings or session captures"
      required_fields:
        - "recording_artifact"
        - "duration"
        - "timestamp"
        - "recording_hash"
      verification_reproducible: false
    METRICS_DASHBOARD:
      description: "Dashboards with observability metrics snapshots"
      required_fields:
        - "dashboard_artifact"
        - "snapshot_timestamp"
        - "metrics_included"
      verification_reproducible: false
    OBSERVABILITY_TRACE:
      description: "Distributed traces showing system behavior"
      required_fields:
        - "trace_artifact"
        - "trace_id"
        - "timestamp"
        - "span_count"
      verification_reproducible: false
    LOAD_TEST_RESULT:
      description: "Load test outputs with performance data"
      required_fields:
        - "test_id"
        - "execution_timestamp"
        - "load_profile"
        - "results_artifact"
      verification_reproducible: true
  evidence_quality_criteria:
    completeness:
      - "All required fields for evidence type are present"
      - "Evidence artifact is accessible and readable"
      - "Verification command is provided for reproducible evidence"
    attributability:
      - "Evidence is linked to specific work_id and lease_id"
      - "Evidence includes timestamp and agent identity"
      - "Policy configuration hash is recorded"
    reproducibility:
      - "Verification commands can be re-run by independent verifier"
      - "All dependencies and prerequisites are documented"
      - "Expected outputs are deterministic or have acceptable variance bounds"
    freshness:
      - "Evidence timestamp is within acceptable staleness window"
      - "For gate reviews, evidence must be from current work iteration"
      - "Cached evidence must declare cache validity period"
    integrity:
      - "Evidence artifacts include cryptographic hash or signature"
      - "Audit logs demonstrate tamper-evidence"
      - "Evidence chain of custody is documented"
    classification:
      - "Data classification is declared (PUBLIC, INTERNAL, RESTRICTED, CONFIDENTIAL)"
      - "Redaction requirements are specified for restricted data"
      - "Access controls match classification level"
  retention_policy:
    permanent_retention:
      evidence_types:
        - "GATE_REVIEW_RECEIPTS"
        - "WAIVER_ARTIFACTS"
        - "SECURITY_AUDIT"
        - "FORMAL_PROOF"
        - "COUNTERMEASURE_VERIFICATION"
      justification: "Compliance, audit trail, and safety-critical verification"
      storage_requirements:
        - "Immutable storage"
        - "Geographic redundancy"
        - "Cryptographic integrity verification"
    seven_year_retention:
      evidence_types:
        - "AUDIT_LOG"
        - "POLICY_CHECK_RESULT"
        - "PLAN_APPROVAL_ARTIFACTS"
        - "ESCALATION_RECORDS"
      justification: "Regulatory compliance and historical analysis"
      storage_requirements:
        - "Immutable storage"
        - "Single-region backup acceptable"
    one_year_retention:
      evidence_types:
        - "TEST_RESULT"
        - "INTEGRATION_TEST_RESULT"
        - "BENCHMARK_RESULT"
        - "LOAD_TEST_RESULT"
      justification: "Development velocity and regression analysis"
      storage_requirements:
        - "Standard storage"
        - "Backup recommended but not required"
      exceptions:
        - "Evidence linked to active waivers retains until waiver closure"
        - "Evidence for HIGH_ASSURANCE profile promotes to permanent retention"
    ninety_day_retention:
      evidence_types:
        - "CONFIG_SNAPSHOT"
        - "BUILD_ARTIFACT"
        - "METRICS_DASHBOARD"
        - "OBSERVABILITY_TRACE"
      justification: "Operational troubleshooting and debugging"
      storage_requirements:
        - "Standard storage"
        - "No backup required"
      exceptions:
        - "Evidence linked to active incidents retains until incident closure"
    retention_automation:
      policy_enforcement: "Automated via lifecycle management"
      deletion_requires_approval: true
      deletion_authority: "AUTH_COMPLIANCE"
      deletion_logged: true
  verification_procedures:
    pre_verification:
      steps:
        - "Validate evidence artifact is accessible"
        - "Check evidence type matches declared type"
        - "Verify all required fields are present"
        - "Confirm data classification is declared"
    verification_execution:
      reproducible_evidence:
        steps:
          - "Retrieve verification command from evidence metadata"
          - "Validate network_access policy (default DISALLOWED)"
          - "Execute verification command in isolated environment"
          - "Compare output to expected result or variance bounds"
          - "Log verification outcome with timestamp and verifier identity"
      non_reproducible_evidence:
        steps:
          - "Retrieve evidence artifact"
          - "Validate artifact integrity (hash/signature)"
          - "If review_required=true, confirm reviewer approval"
          - "Check evidence freshness against policy"
          - "Log validation outcome with timestamp and validator identity"
    post_verification:
      steps:
        - "Record verification result in audit log"
        - "Link verification to work_id and lease_id"
        - "Update gate review status if applicable"
        - "Notify stakeholders of verification outcome"
    verification_failure_handling:
      reproducible_evidence_failure:
        - "Log failure with diagnostic output"
        - "Notify work package owner"
        - "Block gate progression until resolved"
        - "Consider escalation if repeated failures"
      non_reproducible_evidence_failure:
        - "Log validation failure with details"
        - "Request evidence re-submission"
        - "Escalate if integrity concerns detected"
    verification_profiles:
      DEV_FAST:
        description: "Minimal verification for rapid iteration"
        verification_depth: "Required fields only"
        reproducibility_check: "Spot check 10% of evidence"
      STANDARD:
        description: "Standard verification for most work"
        verification_depth: "All required fields plus integrity checks"
        reproducibility_check: "Full verification for security/reliability evidence"
      HIGH_ASSURANCE:
        description: "Maximum verification for critical work"
        verification_depth: "All fields plus extended validation"
        reproducibility_check: "Full verification for all evidence types"
        additional_requirements:
          - "Independent verifier required"
          - "Evidence promotes to permanent retention"
  prohibited_weak_evidence:
    - "A statement that tests passed without captured artifacts and verification commands."
    - "Manual inspection without recorded output and without a reproducible procedure."
    - "Network-dependent verification without explicit allowlisting and captured outputs."
    - "Evidence that cannot be attributed to a work_id, lease_id, and policy configuration hash."
