prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: REQ-0017
  type: SECURITY
  title: Agents never call GitHub APIs directly
  statement: 'Agents MUST NOT call GitHub (or other external forge) APIs directly. All forge interaction is mediated through the sync adapter. This decouples agents from external service APIs and enables the internal system to be authoritative.'
  acceptance_criteria:
    - Agent code audit verifies no GitHub/GitLab API imports or calls.
    - Policy engine blocks network calls to forge API endpoints from agent sessions.
    - Agents interact only with internal work APIs (plan, changeset, gate commands).
    - Sync adapter is the only component with forge API credentials.
    - Violation of this constraint triggers policy violation event and session quarantine.
    - Agent tests verify forge independence (mock adapter, no real API calls).
  evidence:
    evidence_ids:
      - EVID-0003
