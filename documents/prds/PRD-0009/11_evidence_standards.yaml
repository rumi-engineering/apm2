prd_evidence_standards:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  evidence_policy_id: "EVIDENCE_POLICY_FAC_V1"
  evidence_policy:
    requirements:
      - id: EPOL-FAC-0001
        statement: "Every FAC requirement MUST map to one or more evidence artifacts with reproducible verification commands."
      - id: EPOL-FAC-0002
        statement: "Evidence artifacts MUST declare data classification per classification.default_data_classification (INTERNAL); restricted evidence MUST set redaction.required=true."
      - id: EPOL-FAC-0003
        statement: "Evidence capture paths MUST be deterministic and relative to the evidence bundle root."
      - id: EPOL-FAC-0004
        statement: "All evidence verification commands MUST declare network_access; default is DISALLOWED."
      - id: EPOL-FAC-0005
        statement: "Gate evidence bundles MUST be signed and bound to GateRunCompleted events via evidence_bundle_hash."
    minimum_categories_by_requirement_type:
      FUNCTIONAL:
        - "TEST_RESULTS"
      NON_FUNCTIONAL:
        - "TEST_RESULTS"
      INTEROPERABILITY:
        - "INTEGRATION_TEST_RESULTS"
      SECURITY:
        - "TEST_RESULTS"
        - "SECURITY_SCAN_RESULTS"
        - "INTEGRATION_TEST_RESULTS"
        - "POLICY_CHECK_RESULTS"
      COMPLIANCE:
        - "POLICY_CHECK_RESULTS"
        - "AUDIT_LOGS"
      OPERABILITY:
        - "CONFIG_SNAPSHOTS"
        - "BUILD_ARTIFACTS"
      OBSERVABILITY:
        - "METRICS_DASHBOARDS"
        - "OBSERVABILITY_TRACES"
      PERFORMANCE:
        - "BENCHMARK_RESULTS"
        - "LOAD_TEST_RESULTS"
      RELIABILITY:
        - "INTEGRATION_TEST_RESULTS"
      DATA_GOVERNANCE:
        - "AUDIT_LOGS"
        - "POLICY_CHECK_RESULTS"
      COST:
        - "METRICS_DASHBOARDS"
      UX:
        - "TEST_RESULTS"
        - "RECORDINGS"
  requirement_type_evidence_matrix:
    SECURITY:
      required_categories:
        - TEST_RESULTS
        - SECURITY_SCAN_RESULTS
        - INTEGRATION_TEST_RESULTS
        - POLICY_CHECK_RESULTS
      rationale: "Security requirements in FAC are critical (T3 risk tier) and require comprehensive evidence coverage including unit tests, security scans, integration tests, and policy validation."
      minimum_coverage_percent: 100
    FUNCTIONAL:
      required_categories:
        - TEST_RESULTS
        - INTEGRATION_TEST_RESULTS
      rationale: "Functional requirements require test evidence demonstrating correct behavior."
      minimum_coverage_percent: 100
    NON_FUNCTIONAL:
      required_categories:
        - BENCHMARK_RESULTS
        - INTEGRATION_TEST_RESULTS
      rationale: "Non-functional requirements require performance and integration evidence."
      minimum_coverage_percent: 80
  generation_sources:
    - source_id: TOOL_DECIDED_DENY
      description: "ToolDecided DENY events from context firewall enforcement"
      generates_defects:
        - CONTEXT_FIREWALL_DENY
        - CONTEXT_MISS
      evidence_category: POLICY_CHECK_RESULTS
    - source_id: SESSION_TERMINATED_RATIONALE
      description: "SessionTerminated rationale codes from gate execution"
      generates_defects:
        - CONTEXT_MISS
        - ECHO_TRAP
        - REASONING_DEGENERATION
      evidence_category: TEST_RESULTS
    - source_id: PROVIDER_ERROR_CLASSIFICATION
      description: "Provider error classification from ToolExecuted events"
      generates_defects:
        - PROVIDER_RATE_LIMIT
        - PROVIDER_TIMEOUT
      evidence_category: OBSERVABILITY_TRACES
    - source_id: PROJECTION_WATCHDOG
      description: "Projection watchdog events from divergence detection"
      generates_defects:
        - PROJECTION_TAMPER
        - PROJECTION_DIVERGENCE
        - PROJECTION_WRITE_UNAUTHORIZED
      evidence_category: INTEGRATION_TEST_RESULTS
    - source_id: GATE_AUDIT_HOLDOUT
      description: "Gate audit and holdout metrics from HOLON-AUDITOR (Phase 2)"
      generates_defects:
        - EVALUATOR_DRIFT
        - HOLDOUT_FALSE_NEGATIVE
      evidence_category: SECURITY_SCAN_RESULTS
  prohibited_weak_evidence:
    - "A statement that tests passed without captured artifacts."
    - "Manual inspection without recorded output."
    - "Network-dependent verification without explicit allowlisting."
    - "CI conclusions without imported raw evidence digests."
    - "GitHub status checks without internal GateRunCompleted verification."
  fac_specific_evidence_categories:
    - category: CONTEXT_FIREWALL_ENFORCEMENT_RESULTS
      description: "Test results demonstrating OCAP context firewall blocks reads outside ContextPack allowlist."
      required_for:
        - FAC-REQ-0100
    - category: CONTEXT_MISS_HANDLING_RESULTS
      description: "Test results demonstrating context misses terminate sessions and trigger refinement."
      required_for:
        - FAC-REQ-0100
    - category: DIVERGENCE_DETECTION_RESULTS
      description: "Test results demonstrating projection divergence detection and freeze/unfreeze behavior."
      required_for:
        - FAC-REQ-0101
    - category: CI_EVIDENCE_IMPORT_RESULTS
      description: "Test results demonstrating CI evidence-backed readiness gating with raw artifact digests."
      required_for:
        - FAC-REQ-0102
    - category: GATE_SIGNATURE_VERIFICATION_RESULTS
      description: "Test results demonstrating Ed25519 signature verification for GateRunCompleted events."
      required_for:
        - FAC-REQ-0100
        - FAC-REQ-0102
    - category: LEASE_ENFORCEMENT_RESULTS
      description: "Test results demonstrating gate lease scope enforcement and expiry."
      required_for:
        - FAC-REQ-0100
    - category: RUN_RECEIPT_ARTIFACTS
      description: "RunReceipt artifacts capturing context sufficiency metrics (bytes, entries, misses, ZTI score)."
      required_for:
        - FAC-REQ-0100
    - category: MERGE_RECEIPT_ARTIFACTS
      description: "MergeReceipt artifacts binding (base, changeset, gate_receipts, policy) to result."
      required_for:
        - FAC-REQ-0101
    - category: CIRCUIT_BREAKER_RESULTS
      description: "Test results demonstrating circuit breaker thresholds and recovery behavior."
      required_for:
        - FAC-REQ-0100
    - category: RETRY_POLICY_RESULTS
      description: "Test results demonstrating exponential backoff and retry classification."
      required_for:
        - FAC-REQ-0100
    - category: AAT_TYPED_GATE_RECEIPT_RESULTS
      description: "Test results demonstrating typed GateReceipt payload validation for AAT."
      required_for:
        - FAC-REQ-0103
    - category: AAT_VIEW_COMMITMENT_BINDING_RESULTS
      description: "Test results demonstrating AAT GateReceipt payload binding to view_commitment_hash."
      required_for:
        - FAC-REQ-0103
    - category: AAT_EVIDENCE_CHAIN_RESULTS
      description: "Test results demonstrating transcript chain, artifact digest, and attestation bindings for AAT receipts."
      required_for:
        - FAC-REQ-0105
    - category: AAT_TERMINAL_VERIFIER_BINDING_RESULTS
      description: "Test results demonstrating terminal verifier schema enforcement and predicates."
      required_for:
        - FAC-REQ-0106
    - category: AAT_FLAKE_CLASSIFICATION_RESULTS
      description: "Test results demonstrating outcome_class (flake_class field) classification and policy routing."
      required_for:
        - FAC-REQ-0107
    - category: AAT_RISK_TIER_SELECTION_RESULTS
      description: "Test results demonstrating risk-tiered AAT selection policy enforcement."
      required_for:
        - FAC-REQ-0108
    - category: AAT_LEASE_BINDING_RESULTS
      description: "Test results demonstrating AAT lease scope binding and executor custody separation."
      required_for:
        - FAC-REQ-0109
    - category: AAT_SPEC_INVARIANT_RESULTS
      description: "Test results demonstrating invariant-first AAT specification validation."
      required_for:
        - FAC-REQ-0110
    - category: AAT_ANTI_DOWNGRADE_RESULTS
      description: "Test results demonstrating anti-downgrade enforcement for risk tier, verifier policy, and RCP profile."
      required_for:
        - FAC-REQ-0111
    - category: AAT_REUSE_PROVENANCE_RESULTS
      description: "Test results demonstrating AAT reuse provenance tuple enforcement and replay safety."
      required_for:
        - FAC-REQ-0112
    - category: AAT_EVIDENCE_HYGIENE_RESULTS
      description: "Test results demonstrating evidence classification, redaction, and retention policy enforcement."
      required_for:
        - FAC-REQ-0113
    - category: AAT_QUORUM_AUDIT_RESULTS
      description: "Test results demonstrating risk-tier quorum and audit re-run enforcement."
      required_for:
        - FAC-REQ-0114
    - category: AAT_HARNESS_SANDBOX_RESULTS
      description: "Test results demonstrating AAT harness sandboxing and egress control."
      required_for:
        - FAC-REQ-0115
    - category: GATE_DETERMINISM_ENVELOPE_RESULTS
      description: "Test results demonstrating coordinator-managed N-run stability checks."
      required_for:
        - FAC-REQ-0104
    - category: CHANGESET_QUARANTINE_ABORT_RESULTS
      description: "Test results demonstrating quarantine and abort policy on nondeterminism."
      required_for:
        - FAC-REQ-0104
