requirements_readme:
  schema_version: "2026-01-23"
  prd_id: "PRD-0009"
  description: |
    This directory contains individual requirement files for the Forge Admission Cycle (FAC)
    PRD. Each requirement is stored in a separate YAML file following the prd_requirement
    schema. FAC governs the hardened promotion protocol from changeset ingestion through
    cryptographically-enforced admission to trunk, with projection-only GitHub sync.

  requirements:
    - id: "REQ-0001"
      title: "Mechanical Context Firewall"
      type: "SECURITY"
      file: "REQ-0001.yaml"
    - id: "REQ-0002"
      title: "Projection Divergence Emergency Stop"
      type: "SECURITY"
      file: "REQ-0002.yaml"
    - id: "REQ-0003"
      title: "CI evidence-backed readiness gating"
      type: "SECURITY"
      file: "REQ-0003.yaml"
    - id: "REQ-0004"
      title: "Typed GateReceipt payloads for AAT"
      type: "SECURITY"
      file: "REQ-0004.yaml"
    - id: "REQ-0005"
      title: "Gate outcome determinism envelope"
      type: "SECURITY"
      file: "REQ-0005.yaml"
    - id: "REQ-0006"
      title: "Evidence-bound AAT GateReceipt"
      type: "SECURITY"
      file: "REQ-0006.yaml"
    - id: "REQ-0007"
      title: "Terminal verifier binding for AAT"
      type: "SECURITY"
      file: "REQ-0007.yaml"
    - id: "REQ-0008"
      title: "AAT flake classification and policy routing"
      type: "SECURITY"
      file: "REQ-0008.yaml"
    - id: "REQ-0009"
      title: "Risk-tiered AAT selection policy"
      type: "OPERABILITY"
      file: "REQ-0009.yaml"
    - id: "REQ-0010"
      title: "AAT lease binding and executor isolation"
      type: "SECURITY"
      file: "REQ-0010.yaml"
    - id: "REQ-0011"
      title: "Invariant-first AAT specifications"
      type: "FUNCTIONAL"
      file: "REQ-0011.yaml"

  inherited_requirements:
    source_prd: "PRD-0004"
    requirements:
      - id: "REQ-0009"
        title: "Signed GateRunCompleted"
        rationale: "FAC relies on cryptographically signed gate outcomes for admission decisions"
      - id: "REQ-0015"
        title: "GitHub sync adapter projects ledger state"
        rationale: "FAC projection model requires adapter-only writes to GitHub"
      - id: "REQ-0025"
        title: "Critical Event Signing"
        rationale: "FAC admission authority requires signed events with chain-of-custody"

  traceability:
    goal_mapping:
      - goal: "FAC-G-0001"
        description: "Cryptographically enforce admission decisions"
        requirements: ["REQ-0001", "REQ-0002"]
      - goal: "FAC-G-0002"
        description: "Maintain ledger-GitHub consistency"
        requirements: ["REQ-0002"]
      - goal: "FAC-G-0003"
        description: "Evidence-backed CI integration"
        requirements: ["REQ-0003"]
      - goal: "FAC-G-0009"
        description: "Typed AAT gate receipts bound to view commitments"
        requirements: ["REQ-0004"]
      - goal: "FAC-G-0010"
        description: "Gate outcome determinism envelope"
        requirements: ["REQ-0005"]
      - goal: "FAC-G-0011"
        description: "Evidence-first AAT receipts"
        requirements: ["REQ-0006"]
      - goal: "FAC-G-0012"
        description: "Terminal verifier binding"
        requirements: ["REQ-0007"]
      - goal: "FAC-G-0013"
        description: "Flake classification and policy routing"
        requirements: ["REQ-0008"]
      - goal: "FAC-G-0014"
        description: "Risk-tiered AAT selection"
        requirements: ["REQ-0009"]
      - goal: "FAC-G-0015"
        description: "Invariant-first AAT specs"
        requirements: ["REQ-0011"]
    law_mapping:
      - law_id: "LAW-01"
        requirements: ["REQ-0004", "REQ-0006", "REQ-0010"]
        enforcement: "Receipt-backed gates for authoritative promotion"
      - law_id: "LAW-02"
        requirements: ["REQ-0001"]
        enforcement: "Context sufficiency observed; context misses terminate and trigger refinement"
      - law_id: "LAW-03"
        requirements: ["REQ-0002"]
        enforcement: "Ledger is truth; projections overwriteable; divergence detection halts factory"
      - law_id: "LAW-04"
        requirements: ["REQ-0003", "REQ-0004", "REQ-0005", "REQ-0006", "REQ-0007", "REQ-0011"]
        enforcement: "Stochastic stability requires contract + receipt + evidence"
      - law_id: "LAW-05"
        requirements: ["REQ-0001", "REQ-0010"]
        enforcement: "Mechanical context firewall + capability scoping; no ambient credentials"
      - law_id: "LAW-10"
        requirements: ["REQ-0002"]
        enforcement: "Atomic merge receipt binds (base, changeset) -> result; anti-entropy divergence checks"
      - law_id: "LAW-12"
        requirements: ["REQ-0001", "REQ-0005", "REQ-0008", "REQ-0009"]
        enforcement: "Bounded retries and termination discipline"
      - law_id: "LAW-15"
        requirements: ["REQ-0003", "REQ-0004", "REQ-0005", "REQ-0006", "REQ-0007", "REQ-0008", "REQ-0009", "REQ-0010"]
        enforcement: "Measurement integrity and fail-closed behavior"

  evidence_mapping:
    - evidence_id: "EVID-0001"
      requirements: ["REQ-0001"]
      description: "Context firewall enforcement tests"
    - evidence_id: "EVID-0002"
      requirements: ["REQ-0001"]
      description: "Context miss termination and refinement tests"
    - evidence_id: "EVID-0003"
      requirements: ["REQ-0002"]
      description: "Projection divergence detection tests"
    - evidence_id: "EVID-0004"
      requirements: ["REQ-0002"]
      description: "Intervention freeze/unfreeze ceremony tests"
    - evidence_id: "EVID-0005"
      requirements: ["REQ-0003"]
      description: "CI evidence import and attestation tests"
    - evidence_id: "EVID-0006"
      requirements: ["REQ-0003"]
      description: "CI-gated transition validation tests"
    - evidence_id: "EVID-0018"
      requirements: ["REQ-0004"]
      description: "Typed GateReceipt payload validation tests"
    - evidence_id: "EVID-0019"
      requirements: ["REQ-0005"]
      description: "Determinism envelope N-run stability tests"
    - evidence_id: "EVID-0020"
      requirements: ["REQ-0004"]
      description: "View commitment binding tests for AAT GateReceipt payloads"
    - evidence_id: "EVID-0021"
      requirements: ["REQ-0005"]
      description: "Quarantine/abort policy enforcement tests"
    - evidence_id: "EVID-0022"
      requirements: ["REQ-0006"]
      description: "AAT evidence chain and attestation binding tests"
    - evidence_id: "EVID-0023"
      requirements: ["REQ-0007"]
      description: "Terminal verifier binding enforcement tests"
    - evidence_id: "EVID-0024"
      requirements: ["REQ-0009"]
      description: "Risk-tiered AAT selection policy tests"
    - evidence_id: "EVID-0025"
      requirements: ["REQ-0008"]
      description: "AAT flake classification and quarantine tests"
    - evidence_id: "EVID-0026"
      requirements: ["REQ-0010"]
      description: "AAT lease binding and executor isolation tests"
    - evidence_id: "EVID-0027"
      requirements: ["REQ-0011"]
      description: "Invariant-first AAT specification validation tests"
