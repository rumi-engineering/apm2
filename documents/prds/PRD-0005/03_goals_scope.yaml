prd_goals_scope:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  goals:
    - id: G-0001
      statement: Provide a single-command compiler pipeline that produces codebase-aware RFCs and low-noise engineering tickets.
      measurable_outcomes:
        - "Operator can run one CLI command to produce CCP + Impact Map + RFC + tickets."
        - "At least 90% of emitted tickets include explicit file paths and verification commands."
        - "At least 80% of tickets pass first-pass review in a controlled evaluation window."

    - id: G-0002
      statement: Make repository truth a first-class input via a generated Codebase Context Pack.
      measurable_outcomes:
        - "100% of RFC design decisions cite CCP component IDs for impacted surfaces."
        - "0 RFC sections reference non-existent crates/modules/files for a fixed repo state (linted)."

    - id: G-0003
      statement: Control model/provider variability with explicit routing profiles and signed run manifests.
      measurable_outcomes:
        - "Every compile run emits a run manifest recording models/providers/versions per stage."
        - "Re-running compilation with identical inputs and routing profile produces deterministic outputs or a bounded diff that requires acceptance."

    - id: G-0004
      statement: Reduce architectural clutter by defaulting to reuse and making duplication risk explicit.
      measurable_outcomes:
        - "New modules/crates require an explicit justification entry, or compilation fails."
        - "Compiler emits duplication-risk findings when cousin abstraction heuristics trigger."

    - id: G-0005
      statement: Establish continuous refactoring as an always-on, measurable workstream.
      measurable_outcomes:
        - "Refactor Radar produces a weekly artifact and a bounded set of maintenance tickets."
        - "Hotspot duplication signals decrease over time (tracked by signature)."

  scope:
    in_scope:
      - "Core CLI orchestration for PRD->RFC pipeline (stage runner, routing, manifests)."
      - "Codebase Context Pack (atlas, crate graph, hotspots, prior decision index)."
      - "Impact Map and RFC framing rules grounded in CCP."
      - "RFC lint extensions to prevent duplication and enforce justifications."
      - "Ticket decomposition generation with deletion/migration plans."
      - "Skill system integration (new idea-compiler skill, create-rfc updates)."
      - "Refactor Radar generation from CCP signals."
    out_of_scope:
      - "Federation (kernel-to-kernel replication/routing)."
      - "Building full authority-core capability-token infrastructure for all external side effects (tracked separately)."
      - "Replacing existing PRD/RFC schemas or templates."

  success_criteria_summary:
    - "Compiler outputs are template-conformant, lint-clean, and grounded in current repo modules."
    - "Ticket noise decreases and reuse-by-default increases without blocking throughput."
    - "Model routing is controlled and reproducible with recorded provenance."
    - "Continuous refactor stream exists and demonstrably reduces duplication/clutter over time."
