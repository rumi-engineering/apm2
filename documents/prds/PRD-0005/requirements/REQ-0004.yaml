prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: REQ-0004
  type: FUNCTIONAL
  title: RFC framing grounded in CCP and Impact Map
  statement: |
    The compiler MUST produce RFC drafts that are grounded in the CCP and Impact Map. RFC outputs MUST:
      (a) reference concrete crates/modules/files in the current repo state,
      (b) document extension points and invariants, and
      (c) explicitly justify any new abstraction or net-new substrate.
  acceptance_criteria:
    - "RFC drafts include a 'repo grounding' section citing CCP index hash and component IDs."
    - "Any RFC section that references a path is validated to exist at compile time; invalid references fail compilation."
    - "RFC drafts include an alternatives section reflecting the design space exploration and the selected approach."
    - "If net-new substrate exists, RFC includes an adjudication record stub requiring authority approval."
  evidence:
    evidence_ids:
      - EVID-0001
      - EVID-0004
