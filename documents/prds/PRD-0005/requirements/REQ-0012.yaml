prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  id: REQ-0012
  type: OBSERVABILITY
  title: Structured observability for compilation runs
  statement: |
    The compiler MUST emit structured observability for every run and stage, including NDJSON event logs, typed findings, stable exit codes, and run manifests capturing timings and lint receipts.
  acceptance_criteria:
    - "Every stage emits NDJSON events including stage_start, stage_end, timings, and any findings."
    - "Compiler errors are classified (schema, lint, route_unavailable, parse_failure, io, internal) and mapped to stable exit codes."
    - "The run manifest includes stage-level timing breakdown and references to lint outputs."
    - "Observability outputs are redaction-safe by default."
  evidence:
    evidence_ids:
      - EVID-0001
      - EVID-0008
