prd_problem:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"
  context:
    background: |
      The factory's outputs (PRDs, RFCs, tickets) are only as good as the
      compilation process. When PRD->RFC translation is performed without
      mechanical awareness of the existing codebase, it systematically produces
      duplicated utilities, cousin abstractions, and tickets that refer to
      non-existent extension points.

    current_state: |
      The current RFC workflow is template-driven but not repository-grounded.
      It relies on implicit knowledge held by the authoring agent/human.
      Model/provider selection is not recorded per stage, making outputs difficult to
      reproduce and upgrades difficult to control.

    why_now: |
      The codebase is growing rapidly. At high parallelism, accidental complexity
      compounds faster than ad-hoc refactors can remove it. Without a scalable,
      codebase-aware RFC pipeline, the project will converge on cluttered surfaces
      and review cycles will expand.

  problem_statement:
    primary: |
      The system lacks a deterministic, codebase-aware PRD->RFC "idea compiler" that
      (a) ingests explicit repository truth, (b) prefers reuse-by-default, (c) emits
      low-noise tickets, and (d) records provenance and determinism receipts.

    supporting_details:
      - RFCs and tickets are produced without a mandatory mapping to existing crates/modules.
      - New abstractions are introduced without demonstrating that existing extension points were considered.
      - Model/provider choice is not tracked, making outputs non-reproducible and upgrades risky.
      - Refactoring is reactive rather than a continuous, scheduled workstream.

  non_goals:
    - id: NG-0001
      statement: This PRD does not define holon-to-holon federation protocols; it focuses on local repository compilation.
    - id: NG-0002
      statement: This PRD does not require immediate fail-closed enforcement of all governance gates; it establishes mechanism-first tooling.
    - id: NG-0003
      statement: This PRD does not replace existing PRD/RFC templates; it introduces a compiler pipeline that emits template-conformant artifacts.
