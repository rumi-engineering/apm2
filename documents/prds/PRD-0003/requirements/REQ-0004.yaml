prd_requirement:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"

  id: "REQ-0004"
  type: "SECURITY"
  title: "Anti-Gaming: No Hardcoded Logic Detection"
  statement: |
    The AAT agent MUST perform static analysis to detect hardcoded values that
    would pass tests but fail with real inputs. Detection patterns include:
    if-test conditionals, hardcoded UUIDs/timestamps, mock_* prefixes, and
    input-invariant responses.

  acceptance_criteria:
    - "Static analysis detects 'if test' or 'if TEST' conditionals in code"
    - "Static analysis detects hardcoded UUIDs matching UUID regex"
    - "Static analysis detects mock_* or stub_* function prefixes"
    - "Input variation testing detects same output for different inputs"
    - "Detection findings included in evidence bundle anti_gaming section"
    - "Any detection finding causes AAT to fail unless waived"

  evidence:
    evidence_ids:
      - "EVID-0007"
      - "EVID-0008"
    inherited_from_prd: false
    notes:
      - "Detection patterns will evolve based on observed gaming techniques"
