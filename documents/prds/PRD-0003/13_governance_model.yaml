prd_governance_model:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"

  governance_id: "AAT_GOVERNANCE_V1"

  authority_model:
    concepts:
      authority: "Roles/capabilities that can approve waivers and gates for AAT"
      custody: "Agent roles that produce and modify AAT artifacts"
      responsibility: "Domains accountable for AAT correctness and operation"
      stewardship: "Standards governance for AAT protocol and evidence"

    authority_roles:
      - role_id: "AUTH_AAT"
        description: "Authority to approve AAT waivers and adjudicate disputed results"
        capabilities:
          - "Approve AAT waivers"
          - "Override AAT status check"
          - "Adjudicate ambiguous AAT results"

      - role_id: "AUTH_SECURITY"
        description: "Authority to approve anti-gaming exceptions"
        capabilities:
          - "Approve anti-gaming waivers"
          - "Review anti-gaming detection patterns"

      - role_id: "AUTH_PRODUCT"
        description: "Authority to approve AAT protocol changes"
        capabilities:
          - "Approve AAT protocol modifications"
          - "Define AAT coverage requirements"

  gates:
    - gate_id: "GATE-AAT-ACCEPTANCE"
      authority_role: "AUTH_AAT"
      description: "PR passes hypothesis-driven testing"
      required_evidence_categories:
        - "TEST_RESULTS"
        - "RECORDINGS"
      blocking: true

    - gate_id: "GATE-AAT-ANTI-GAMING"
      authority_role: "AUTH_SECURITY"
      description: "No hardcoded values or undocumented TODOs detected"
      required_evidence_categories:
        - "SECURITY_SCAN_RESULTS"
        - "POLICY_CHECK_RESULTS"
      blocking: true

    - gate_id: "GATE-AAT-EVIDENCE"
      authority_role: "AUTH_AAT"
      description: "Evidence bundle script present and valid"
      required_evidence_categories:
        - "TEST_RESULTS"
      blocking: true

  waiver_policy:
    waiver_required_keys:
      - "scope"
      - "rationale"
      - "expiration_date"
      - "required_signoffs"
      - "evidence_ids"

    waiver_limits:
      - constraint: "AAT waivers expire after 30 days maximum"
        enforcement: "Waiver expiration enforced by CI"

      - constraint: "Anti-gaming waivers require AUTH_SECURITY approval"
        enforcement: "Waiver status check validates authority"

      - constraint: "Waiver rate must not exceed 5% of PRs"
        enforcement: "Metrics tracking with alerting"

    waiver_status_enum_ref: "standards/enums/19_waiver_status.yaml#waiver_status.values"

  escalation_protocol:
    - level: 1
      trigger: "AAT agent cannot determine pass/fail"
      action: "Set status to NEEDS_ADJUDICATION, notify AUTH_AAT"
      timeout: "4 hours"

    - level: 2
      trigger: "No adjudication within 4 hours"
      action: "Escalate to AUTH_PRODUCT"
      timeout: "24 hours"

    - level: 3
      trigger: "No resolution within 24 hours"
      action: "Auto-fail with documented reason"
      timeout: "N/A"
