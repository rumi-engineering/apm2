prd_evidence_artifact:
  schema_version: "2026-01-23"
  template_version: "2026-01-23"

  id: "EVID-0002"
  category: "POLICY_CHECK_RESULTS"
  title: "PR Template Conformance"

  capture:
    paths:
      - "evidence/aat/pr_template_conformance/"

  verification:
    commands:
      - id: "CMD-0001"
        shell: "bash"
        command: |
          # Verify PR template includes AAT-required sections
          set -euo pipefail
          TEMPLATE=".github/PULL_REQUEST_TEMPLATE.md"

          if [[ ! -f "$TEMPLATE" ]]; then
            echo "PR template not found at $TEMPLATE"
            exit 1
          fi

          # Check template includes AAT sections
          grep -q "## Usage" "$TEMPLATE" || { echo "Template missing ## Usage"; exit 1; }
          grep -q "## Expected Outcomes" "$TEMPLATE" || { echo "Template missing ## Expected Outcomes"; exit 1; }
          grep -q "## Evidence Script" "$TEMPLATE" || { echo "Template missing ## Evidence Script"; exit 1; }
          grep -q "## Known Limitations" "$TEMPLATE" || { echo "Template missing ## Known Limitations"; exit 1; }

          echo "PR template conformance check passed"
        expected_exit_code: 0
        cwd: "."
        timeout_seconds: 30
        network_access: "DISALLOWED"
        allowlist_hosts: []
        constraints: []

  data:
    classification: "INTERNAL"
    redaction:
      required: false
      guidance: []
