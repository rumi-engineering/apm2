ticket_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  ticket:
    id: "TCK-00445"
    title: "Credential hardening and PAT-free FAC projection operation"
    status: "CLOSED"
  binds:
    prd_id: "PRD-0009"
    rfc_id: "RFC-0018"
    requirements:
      - requirement_id: "REQ-HEF-0023"
        requirement_ref: "documents/rfcs/RFC-0018/requirements/REQ-HEF-0023.yaml#rfc_requirement"
    evidence_artifacts:
      - evidence_id: "EVID-HEF-0017"
        artifact_ref: "documents/rfcs/RFC-0018/evidence_artifacts/EVID-HEF-0017.yaml#rfc_evidence_artifact"
  custody:
    agent_roles:
      - "AGENT_IMPLEMENTER"
      - "AGENT_REVIEWER"
      - "AGENT_QA"
    responsibility_domains:
      - "DOMAIN_SECURITY"
      - "DOMAIN_RUNTIME"
  dependencies:
    tickets:
      - ticket_id: "TCK-00442"
        reason: "Trusted workflow path must exist before credential posture hardening is finalized."
  scope:
    in_scope:
      - "Remove PAT dependence from normal FAC projection operations."
      - "Prevent sensitive credential material from being exposed in process argv or projected logs."
      - "Harden command invocation patterns to avoid insecure environment propagation."
      - "Fail closed when credential source/trust posture is missing or ambiguous."
    out_of_scope:
      - "Reviewer lifecycle idempotency and telemetry semantics."
      - "RoleSpec launch over subagents."
  plan:
    steps:
      - "Audit and remove PAT-based projection assumptions in FAC workflow path."
      - "Implement secure invocation path that avoids argv credential leakage."
      - "Add deny checks for ambiguous credential sources and insecure invocation patterns."
      - "Add regression tests/lints for credential exposure and PAT drift."
      - "Run required security and CI checks."
  definition_of_done:
    evidence_ids:
      - "EVID-HEF-0017"
    criteria:
      - "PAT is not required for standard FAC projection operation."
      - "Credentials are absent from argv and projected logs in tested paths."
      - "Ambiguous credential posture triggers fail-closed projection denial."
  notes:
    security: |
      Credential handling is containment-critical and must prioritize fail-closed outcomes.
    verification: |
      Include explicit negative tests for argv and logging leaks.
    general: |
      This ticket closes security posture gaps in the projection execution path.
