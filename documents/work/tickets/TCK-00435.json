{
  "schema": "apm2.ticket.v1",
  "ticket_meta": {
    "schema_version": "2026-01-29",
    "template_version": "2026-01-29",
    "ticket": {
      "id": "TCK-00435",
      "title": "Refactor fac_review.rs monolith into clean directory module",
      "status": "CLOSED",
      "note": "Refactor completed organically across RFC-0019 ticket work. fac_review is now a directory module."
    },
    "binds": {
      "prd_id": "PRD-0009",
      "rfc_id": "RFC-0018",
      "requirements": [
        {
          "requirement_id": "REQ-HEF-0016",
          "requirement_ref": "documents/rfcs/RFC-0018/requirements/REQ-HEF-0016.yaml#rfc_requirement"
        }
      ],
      "evidence_artifacts": []
    },
    "custody": {
      "agent_roles": [
        "AGENT_IMPLEMENTER"
      ],
      "responsibility_domains": [
        "DOMAIN_RUNTIME"
      ]
    },
    "dependencies": {
      "tickets": [
        {
          "ticket_id": "TCK-00433",
          "reason": "Follow-up structural improvement to the fac_review module created by TCK-00433."
        }
      ]
    },
    "scope": {
      "in_scope": [
        "Split 5,418-line crates/apm2-cli/src/commands/fac_review.rs into a directory module with 14 focused sub-modules.",
        "Sub-modules: types, events, detection, liveness, model_pool, state, backend, evidence, barrier, projection, dispatch, push, orchestrator.",
        "Thin mod.rs retains 9 public entry points, dispatch/status/tail helpers, and all 42 tests.",
        "No behavioral changes â€” purely structural refactoring."
      ],
      "out_of_scope": [
        "ForgeProjection trait extraction (future ticket).",
        "MockForge-based unit tests (future ticket).",
        "Any changes to fac.rs or mod.rs public API surface."
      ]
    },
    "rationale": "PR #509 code review flagged fac_review.rs as a monolithic file that impedes\nmaintainability. Breaking it into focused sub-modules with a clean dependency\nDAG improves readability, testability, and enables future ForgeProjection\ntrait extraction.\n",
    "plan": {
      "steps": [
        "Convert fac_review.rs to fac_review/mod.rs directory module.",
        "Extract 13 sub-modules by domain: types, events, detection, liveness, model_pool, state, backend, evidence, barrier, projection, dispatch, push, orchestrator.",
        "Resolve cross-module dependencies via super:: and inter-module imports.",
        "Fix clippy redundant_pub_crate warnings (private modules don't need pub(crate)).",
        "Verify all 42 tests pass, clippy clean, cargo doc clean."
      ]
    },
    "acceptance_criteria": [
      "fac_review.rs no longer exists; replaced by fac_review/ directory module.",
      "mod.rs is under 1,800 lines (down from 5,418).",
      "No sub-module exceeds 850 lines.",
      "All 42 existing tests pass unchanged.",
      "cargo clippy -D warnings, cargo fmt, cargo doc --no-deps all clean.",
      "No changes to public API surface consumed by fac.rs."
    ],
    "notes": {
      "general": "This is Phase 0-11 of a larger refactoring plan. Phases 12-15 (ForgeProjection\ntrait, MockForge tests) are deferred to a future ticket.\n"
    }
  }
}
