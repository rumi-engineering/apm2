ticket_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  ticket:
    id: "TCK-00515"
    title: "Lanes v1: lane directories + LaneProfileV1 + LaneLeaseV1 + `apm2 fac lane status`"
    status: "OPEN"
  binds:
    prd_id: "PRD-PLACEHOLDER"
    rfc_id: "RFC-0019"
    requirements: []
    evidence_artifacts: []
  custody:
    agent_roles: ["AGENT_IMPLEMENTER"]
    responsibility_domains: ["DOMAIN_RUNTIME"]
  dependencies:
    tickets: []
  scope:
    in_scope:
      - "Create lane directory layout under `$APM2_HOME/private/fac/lanes/<lane_id>/{workspace,target,logs}`."
      - "Implement `LaneProfileV1` persistence per lane and hash computation."
      - "Implement lock+lease record mechanism (`locks/lanes/<lane_id>.lock`, `lanes/<lane_id>/lease.v1.json`)."
      - "Implement stale lease detection rules (pid alive vs dead)."
      - "Add `apm2 fac lane status` (human + JSON)."
    out_of_scope:
      - "Distributed lanes."
  plan:
    steps:
      - "Implement lane ID allocation (static default set; configurable lane_count)."
      - "Implement lock acquisition using existing proven pattern (RAII + jitter)."
      - "Implement lease record updates and crash recovery semantics."
  definition_of_done:
    evidence_ids: []
    criteria:
      - "At most one job executes in a lane at a time under concurrency."
      - "Lane status reports correct state derived from lock + lease record + last receipt."
