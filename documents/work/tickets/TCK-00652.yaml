ticket_meta:
  schema_version: '2026-01-29'
  template_version: '2026-01-29'
  ticket:
    id: TCK-00652
    title: 'RFC-0032 Phase 6: backfill legacy WorkRegistry claims into WORK_AUTHORITY_BINDINGS evidence (mark incomplete; require re-claim for spawns)'
    status: OPEN
  binds:
    prd_id: PRD-PLACEHOLDER
    rfc_id: RFC-0032
    requirements: []
    evidence_artifacts: []
  custody:
    agent_roles:
    - AGENT_IMPLEMENTER
    responsibility_domains:
    - DOMAIN_DAEMON
    - DOMAIN_DATA
    - DOMAIN_EVIDENCE
  dependencies:
    tickets:
    - ticket_id: TCK-00651
      reason: SpawnEpisode must read bindings from projections/CAS
  scope:
    in_scope:
    - During Phase 6 cutover, backfill WORK_AUTHORITY_BINDINGS evidence for each active `work_claims` row in WorkRegistry
    - If boundary pins are missing, mark bindings as incomplete (in CAS doc) and treat them as non-authoritative for new spawns until re-claimed via ClaimWorkV2
    - Provide a daemon admin command or startup routine to perform the backfill in a bounded, idempotent way
    out_of_scope:
    - Attempting to infer missing boundary pins from non-replayable sources (fail-closed instead)
  plan:
    steps:
    - Add a backfill routine that reads WorkRegistry active claims and emits WORK_AUTHORITY_BINDINGS evidence events (CAS-first then ledger)
    - Define 'incomplete' marker semantics in WorkAuthorityBindings schema (e.g., nullable required pins + explicit completeness flag)
    - 'Update spawn logic: if bindings are incomplete and come from backfill, reject SpawnEpisode with actionable error instructing re-claim'
    - 'Add tests: backfill emits evidence; incomplete claims block spawns'
  definition_of_done:
    evidence_ids: []
    criteria:
    - Backfill routine is idempotent and bounded (does not spam ledger on restart).
    - Incomplete backfilled claims are non-authoritative for spawning until re-claimed under ClaimWorkV2.
