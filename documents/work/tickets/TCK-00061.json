{
  "schema": "apm2.ticket.v1",
  "ticket_meta": {
    "schema_version": "2026-01-24",
    "template_version": "2026-01-24",
    "ticket": {
      "id": "TCK-00061",
      "title": "Enhance Pre-Commit Clippy Lints"
    },
    "binds": {
      "prd_id": "NONE",
      "rfc_id": "RFC-0006",
      "requirements": [
        {
          "requirement_id": "MAINT-007",
          "requirement_ref": "documents/rfcs/RFC-0006/01_problem_and_imports.yaml#rfc_local_requirements.requirements[1]"
        }
      ],
      "evidence_artifacts": []
    },
    "custody": {
      "agent_roles": [
        "AGENT_IMPLEMENTER"
      ],
      "responsibility_domains": [
        "DOMAIN_BUILD_RELEASE"
      ]
    },
    "dependencies": {
      "tickets": []
    },
    "scope": {
      "in_scope": [
        "Add explicit clippy lint -D clippy::doc_markdown to catch missing backticks in doc comments",
        "Add explicit clippy lint -D clippy::match_same_arms to catch redundant match arms",
        "Add explicit clippy lint -W clippy::missing_const_for_fn as a warning for const promotion",
        "Add helpful tip about using `..` in match patterns to handle new struct fields",
        "Update run_pre_commit_checks() function in commit.rs"
      ],
      "out_of_scope": [
        "Changes to other xtask commands",
        "Changes to cargo clippy configuration files",
        "Adding new pre-commit check steps (count remains 4)",
        "Modifying the clippy check for other xtask commands like check or push"
      ]
    },
    "plan": {
      "steps": [
        "Read xtask/src/tasks/commit.rs to understand current clippy invocation",
        "Modify the cargo clippy command in run_pre_commit_checks() to add explicit lints",
        "Add -D clippy::doc_markdown lint to deny missing backticks in doc comments",
        "Add -D clippy::match_same_arms lint to deny redundant match arm bodies",
        "Add -W clippy::missing_const_for_fn lint as warning for const fn promotion opportunities",
        "Add println! tip after clippy check about using `..` in match patterns for forward compatibility",
        "Run cargo fmt to ensure formatting is correct",
        "Run cargo clippy to verify no lint violations in the change",
        "Run cargo test -p xtask to verify existing tests pass",
        "Test the commit command manually to verify lints are applied"
      ]
    },
    "definition_of_done": {
      "evidence_ids": [],
      "criteria": [
        "cargo xtask commit runs clippy with -D clippy::doc_markdown lint",
        "cargo xtask commit runs clippy with -D clippy::match_same_arms lint",
        "cargo xtask commit runs clippy with -W clippy::missing_const_for_fn lint",
        "Tip about `..` in match patterns is displayed after clippy check passes",
        "cargo build succeeds",
        "cargo test passes",
        "cargo clippy passes with no warnings",
        "cargo fmt --check passes"
      ]
    },
    "notes": {
      "security": "No security impact - local linting enhancement only",
      "affected_file": "xtask/src/tasks/commit.rs line 104 (clippy command) and lines 107-108 (tip message)",
      "rationale": "These additional clippy lints address issues discovered during PR #58 and #59:\n- doc_markdown: Catches missing backticks around code in doc comments\n- match_same_arms: Catches redundant match arms that should be combined\n- missing_const_for_fn: Warns about functions that could be const\nThe tip about `..` patterns helps developers handle new struct fields gracefully.\n"
    }
  }
}
