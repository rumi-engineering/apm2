acceptance_criteria:
  - criterion: Legacy single-socket config keys are rejected
    verification: Config parse fails if [daemon].socket is present
  - criterion: Dual sockets are required
    verification: Config validation fails without operator_socket and session_socket
implementation:
  code_examples: []
  files_to_create: []
  files_to_modify:
    - changes: |
        Replace daemon.socket with operator_socket + session_socket.
        Reject legacy single-socket keys (fail-closed).
      path: crates/apm2-core/src/config/mod.rs
    - changes: |
        Update example config to use dual socket keys.
      path: ecosystem.example.toml
  implementation_steps:
    - "Add operator_socket + session_socket to daemon config"
    - "Fail-closed on legacy socket key"
  summary: "Config schema cutover to dual sockets only (DD-009)."
notes: |
  Phase: PHASE-1
  Added by Amendment A-001 (DD-009 hard cutover).
schema_version: "2026-01-26"
template_version: "2026-01-26"
test_requirements:
  - description: Legacy socket key rejection
    test_id: UT-00280-01
    verification_command: cargo test -p apm2-core config_reject_legacy_socket
ticket:
  depends_on: []
  id: TCK-00280
  requirement_ids:
    - REQ-DCP-0001
    - REQ-DCP-0008
  rfc_id: RFC-0017
  status: READY
  title: Config schema cutover: dual sockets only
