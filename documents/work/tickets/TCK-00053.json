{
  "schema": "apm2.ticket.v1",
  "ticket_meta": {
    "schema_version": "2026-01-24",
    "template_version": "2026-01-24",
    "ticket": {
      "id": "TCK-00053",
      "title": "Implement evidence bundle logic"
    },
    "binds": {
      "prd_id": "PRD-0003",
      "rfc_id": "RFC-0004",
      "requirements": [
        {
          "requirement_id": "REQ-0006",
          "requirement_ref": "documents/prds/PRD-0003/requirements/REQ-0006.yaml#prd_requirement"
        },
        {
          "requirement_id": "REQ-0003",
          "requirement_ref": "documents/prds/PRD-0003/requirements/REQ-0003.yaml#prd_requirement"
        }
      ],
      "evidence_artifacts": [
        {
          "evidence_id": "EVID-0006",
          "artifact_ref": "documents/prds/PRD-0003/evidence_artifacts/EVID-0006.yaml#prd_evidence_artifact"
        }
      ]
    },
    "custody": {
      "agent_roles": [
        "AGENT_IMPLEMENTER"
      ],
      "responsibility_domains": [
        "DOMAIN_BUILD_RELEASE"
      ]
    },
    "dependencies": {
      "tickets": [
        {
          "ticket_id": "TCK-00050",
          "reason": "Requires shared types: EvidenceBundle, Hypothesis, Verdict, PrDescriptionParse, AntiGamingResult"
        }
      ]
    },
    "scope": {
      "in_scope": [
        "Create xtask/src/aat/evidence.rs module",
        "Add pub mod evidence to xtask/src/aat/mod.rs",
        "Implement EvidenceBundle::new(pr_number, commit_sha) constructor",
        "Implement set_pr_description_parse(parsed: &ParsedPRDescription)",
        "Implement add_hypothesis(hypothesis: Hypothesis)",
        "Implement set_anti_gaming_result(result: &AntiGamingResult)",
        "Implement compute_verdict() -> Verdict based on hypotheses and anti_gaming",
        "Implement to_json() -> String for serialization",
        "Implement write_to_file(base_path: &Path) -> creates evidence/aat/ directory and writes JSON",
        "Ensure JSON output matches skill schema exactly",
        "Include schema_version field (1.0.0)",
        "Write unit tests for bundle construction and serialization",
        "Write test verifying JSON matches skill schema"
      ],
      "out_of_scope": [
        "Type definitions (TCK-00050)",
        "Long-term evidence storage backend",
        "Evidence bundle signing/encryption",
        "Evidence analytics dashboard",
        "Hypothesis generation logic (handled by AAT skill)",
        "PR parsing (TCK-00051)",
        "Anti-gaming analysis (TCK-00052)",
        "AAT command orchestration (TCK-00054)"
      ]
    },
    "plan": {
      "steps": [
        "Add pub mod evidence to xtask/src/aat/mod.rs",
        "Create xtask/src/aat/evidence.rs",
        "Import types from crate::aat::types",
        "Implement EvidenceBundle::new(pr_number, commit_sha) constructor",
        "Implement set_pr_description_parse(parsed: &ParsedPRDescription)",
        "Implement add_hypothesis(hypothesis: Hypothesis)",
        "Implement set_anti_gaming_result(result: &AntiGamingResult)",
        "Implement compute_verdict() -> Verdict based on hypotheses and anti_gaming",
        "Implement to_json() -> String for serialization",
        "Implement write_to_file(base_path: &Path) -> creates evidence/aat/ directory and writes JSON",
        "Write unit tests for bundle construction and serialization",
        "Write test verifying JSON matches skill schema"
      ]
    },
    "definition_of_done": {
      "evidence_ids": [
        "EVID-0006"
      ],
      "criteria": [
        "xtask/src/aat/evidence.rs exists",
        "pub mod evidence declared in xtask/src/aat/mod.rs",
        "EvidenceBundle struct builder pattern implemented",
        "JSON output includes schema_version: 1.0.0",
        "JSON output includes pr_number and commit_sha",
        "pr_description_parse section correctly reflects parsed sections",
        "hypotheses array contains all hypotheses with timestamps",
        "anti_gaming section includes static_analysis, input_variation, todo_check, result",
        "verdict is PASSED, FAILED, or NEEDS_ADJUDICATION",
        "verdict_reason provides human-readable summary",
        "write_to_file() creates evidence/aat/PR-{n}_{ts}.json",
        "cargo build succeeds",
        "cargo test passes",
        "cargo clippy passes with no warnings"
      ]
    },
    "notes": {
      "security": "Evidence bundles are audit artifacts - ensure integrity and traceability",
      "verification": "Compare generated JSON against skill schema manually",
      "general": "Uses types from TCK-00050. The evidence bundle is the primary artifact for AAT verification."
    }
  }
}
