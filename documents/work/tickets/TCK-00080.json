{
  "schema": "apm2.ticket.v1",
  "ticket_meta": {
    "schema_version": "2026-01-24",
    "template_version": "2026-01-24",
    "ticket": {
      "id": "TCK-00080",
      "title": "Configure mold linker in .cargo/config.toml"
    },
    "binds": {
      "prd_id": "NONE",
      "rfc_id": "RFC-0007",
      "requirements": [
        {
          "requirement_id": "PERF-001",
          "requirement_ref": "documents/rfcs/RFC-0007/01_problem_and_imports.yaml#rfc_local_requirements.requirements[0]"
        }
      ],
      "evidence_artifacts": [
        {
          "evidence_id": "EVID-7001",
          "artifact_ref": "documents/rfcs/RFC-0007/05_evidence_definitions.yaml#evidence_definitions.evidence_artifacts[0]"
        }
      ]
    },
    "custody": {
      "agent_roles": [
        "AGENT_IMPLEMENTER"
      ],
      "responsibility_domains": [
        "DOMAIN_BUILD_RELEASE"
      ]
    },
    "dependencies": {
      "tickets": []
    },
    "scope": {
      "in_scope": [
        "Add [target.x86_64-unknown-linux-gnu] section to .cargo/config.toml",
        "Set linker = \"clang\"",
        "Set rustflags to use mold via -fuse-ld=mold",
        "Add comment explaining the configuration",
        "Preserve existing [alias] section"
      ],
      "out_of_scope": [
        "macOS mold configuration",
        "Windows linker configuration",
        "CI workflow changes",
        "Installing mold (already present at /usr/bin/mold)"
      ]
    },
    "plan": {
      "steps": [
        "Read current .cargo/config.toml to understand existing structure",
        "Add [target.x86_64-unknown-linux-gnu] section after existing content",
        "Set linker = \"clang\" to use clang as the linker driver",
        "Set rustflags = [\"-C\", \"link-arg=-fuse-ld=mold\"] to use mold",
        "Add comment explaining the configuration and fallback behavior",
        "Verify cargo build -vv shows mold being used",
        "Verify cargo build --workspace succeeds",
        "Verify cargo test --workspace passes",
        "Verify cargo clippy passes with no warnings"
      ]
    },
    "definition_of_done": {
      "evidence_ids": [
        "EVID-7001"
      ],
      "criteria": [
        ".cargo/config.toml contains [target.x86_64-unknown-linux-gnu] section",
        "linker = \"clang\" is configured",
        "rustflags includes -fuse-ld=mold",
        "Comment explains the configuration",
        "cargo build -vv 2>&1 | grep mold shows mold is used",
        "cargo build --workspace succeeds",
        "cargo test --workspace passes",
        "cargo clippy passes with no warnings",
        "Developers on non-Linux platforms are unaffected"
      ]
    },
    "notes": {
      "security": "No security implications. mold is a standard, widely-used linker that\nproduces functionally identical binaries to ld. The configuration only\naffects the build process, not the resulting binaries' behavior.\n",
      "fallback_behavior": "The configuration is target-specific (x86_64-unknown-linux-gnu only):\n- macOS developers: Unaffected, uses default macOS linker (ld64)\n- Windows developers: Unaffected, uses default MSVC linker\n- ARM64 Linux: Unaffected unless separate target section is added\n- If mold/clang missing: Build fails with clear error message\n  Developer can comment out the section to use default linker\n",
      "implementation_details": "The .cargo/config.toml should look like this after the change:\n\n```toml\n[alias]\nxtask = \"run --package xtask --\"\n\n# Use mold linker for faster linking on Linux\n# mold is significantly faster than ld/gold for debug builds\n# If mold is not installed, comment out this section or install:\n#   Ubuntu: apt install mold\n#   Fedora: dnf install mold\n#   Arch: pacman -S mold\n[target.x86_64-unknown-linux-gnu]\nlinker = \"clang\"\nrustflags = [\"-C\", \"link-arg=-fuse-ld=mold\"]\n```\n\nRequirements:\n- mold must be installed (verified: /usr/bin/mold exists)\n- clang must be installed (required as linker driver)\n\nVerification:\n```bash\ncargo build -vv 2>&1 | grep -E '(mold|fuse-ld=mold)'\n```\n",
      "affected_files": "Modified: .cargo/config.toml (add mold linker configuration)\n"
    }
  }
}
