ticket_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  ticket:
    id: "TCK-00575"
    title: "Env & path hygiene completion: set HOME/TMPDIR/XDG dirs per lane; prevent writes to ambient user locations"
    status: "OPEN"
  binds:
    prd_id: "PRD-PLACEHOLDER"
    rfc_id: "RFC-0019"
    requirements: []
    evidence_artifacts: []
  custody:
    agent_roles: ["AGENT_IMPLEMENTER"]
    responsibility_domains: ["DOMAIN_SECURITY", "DOMAIN_RUNTIME"]
  dependencies:
    tickets:
      - ticket_id: "TCK-00526"
        reason: "FAC-managed env clearing exists."
  scope:
    in_scope:
      - "Set deterministic per-lane/per-job environment roots:"
      - "  - HOME=$APM2_HOME/private/fac/lanes/<lane_id>/home"
      - "  - TMPDIR=$APM2_HOME/private/fac/lanes/<lane_id>/tmp"
      - "  - XDG_CACHE_HOME=$APM2_HOME/private/fac/lanes/<lane_id>/xdg_cache"
      - "  - XDG_CONFIG_HOME=$APM2_HOME/private/fac/lanes/<lane_id>/xdg_config"
      - "Enforce directory creation and quotas via GC policy."
      - "Ensure cargo/git respect these envs in job units."
    out_of_scope:
      - "Rewriting third-party tools."
  plan:
    steps:
      - "Add env_set entries to FacPolicyV1 defaults."
      - "Update executor to create dirs safely and set env."
  definition_of_done:
    evidence_ids: []
    criteria:
      - "FAC jobs do not write into `~/.cache`, `~/.cargo`, or other ambient user dirs by default."
