{
  "schema": "apm2.ticket.v1",
  "ticket_meta": {
    "schema_version": "2026-01-24",
    "template_version": "2026-01-24",
    "ticket": {
      "id": "TCK-00059",
      "title": "Add Learned Anti-Patterns to Coding Guidelines"
    },
    "binds": {
      "prd_id": "NONE",
      "rfc_id": "RFC-0006",
      "requirements": [
        {
          "requirement_id": "MAINT-006",
          "requirement_ref": "documents/rfcs/RFC-0006/01_problem_and_imports.yaml#rfc_local_requirements.requirements[0]"
        }
      ],
      "evidence_artifacts": []
    },
    "custody": {
      "agent_roles": [
        "AGENT_IMPLEMENTER"
      ],
      "responsibility_domains": [
        "DOMAIN_DOCUMENTATION"
      ]
    },
    "dependencies": {
      "tickets": []
    },
    "scope": {
      "in_scope": [
        "Add 'Anti-Patterns (Lessons Learned)' section to documents/skills/rust-textbook/26_apm2_safe_patterns_and_anti_patterns.md",
        "Document ANTI-1: Shell argument escaping for complex strings",
        "Document ANTI-2: Predictable temp file names",
        "Document ANTI-3: Incomplete struct field updates",
        "Add INV-2615: Counters and Attempts Are Monotonic (APPLY: INV-2502)",
        "Update SKILL.md to reference anti-patterns section",
        "Include lessons learned from PR #58 (crash detection and restart logic)",
        "Include lessons learned from PR #59 (TCK-00055 implementation)"
      ],
      "out_of_scope": [
        "Changes to Rust source code",
        "New tooling or automation",
        "Changes to other skill documents",
        "Retroactive code fixes for documented anti-patterns"
      ]
    },
    "plan": {
      "steps": [
        "Read current 26_apm2_safe_patterns_and_anti_patterns.md to understand existing structure",
        "Read PR #58 and #59 to extract specific anti-pattern examples",
        "Add new 'Anti-Patterns (Lessons Learned)' section after existing SAFE patterns",
        "Document ANTI-1: Explain shell argument escaping issues with complex strings containing spaces, quotes, or special characters",
        "Document ANTI-2: Explain risks of predictable temp file names and recommend using random suffixes or mktemp",
        "Document ANTI-3: Explain incomplete struct field updates when adding new fields and missing exhaustive pattern matching",
        "Add INV-2615: Counters and Attempts Are Monotonic - ensure restart counters always increase, never reset unintentionally",
        "Update SKILL.md to add reference directing readers to anti-patterns section in 26_apm2_safe_patterns_and_anti_patterns.md",
        "Verify documentation is clear, actionable, and includes code examples where appropriate",
        "Run cargo build and cargo test to ensure no documentation links are broken"
      ]
    },
    "definition_of_done": {
      "evidence_ids": [],
      "criteria": [
        "26_apm2_safe_patterns_and_anti_patterns.md contains 'Anti-Patterns (Lessons Learned)' section",
        "ANTI-1 (shell argument escaping) is documented with clear examples",
        "ANTI-2 (predictable temp files) is documented with recommended alternatives",
        "ANTI-3 (incomplete struct field updates) is documented with prevention strategies",
        "INV-2615 (Counters and Attempts Are Monotonic) is documented (APPLY: INV-2502)",
        "SKILL.md references the anti-patterns section",
        "Documentation is clear and actionable for future developers",
        "cargo build succeeds",
        "cargo test passes"
      ]
    },
    "notes": {
      "security": "Documentation only - no runtime security impact",
      "motivation": "Capture lessons learned from PR #58 and #59 to prevent recurring issues",
      "source_prs": "PR #58 (crash detection), PR #59 (TCK-00055)"
    }
  }
}
