ticket_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  ticket:
    id: "TCK-00474"
    title: "RFC-0029 REQ-0005 replay-recovery bounds and idempotency closure"
    status: "OPEN"
  binds:
    prd_id: "PRD-0010"
    rfc_id: "RFC-0029"
    requirements:
      - requirement_id: "REQ-0005"
        requirement_ref: "documents/rfcs/RFC-0029/requirements/REQ-0005.yaml#requirement"
    evidence_artifacts:
      - evidence_id: "EVID-0005"
        artifact_ref: "documents/rfcs/RFC-0029/evidence_artifacts/EVID-0005.yaml#evidence_artifact"
  custody:
    agent_roles:
      - "AGENT_IMPLEMENTER"
      - "AGENT_REVIEWER"
      - "AGENT_QA"
    responsibility_domains:
      - "DOMAIN_RUNTIME"
      - "DOMAIN_RELIABILITY"
      - "DOMAIN_SECURITY"
  dependencies:
    tickets:
      - ticket_id: "TCK-00473"
        reason: "Replay/recovery closure depends on established queue and anti-entropy bounds."
  scope:
    in_scope:
      - "Emit ReplayConvergenceReceiptV1 and RecoveryAdmissibilityReceiptV1 with signed temporal bindings."
      - "Enforce TP-EIO29-004 and TP-EIO29-007 replay/idempotency checks across retries and partitions."
      - "Guarantee dedup closure for authoritative effects under retry/restart and partition/rejoin."
      - "Emit structured deny defects for unresolved effect identity and stale replay receipts."
    out_of_scope:
      - "Projection sink continuity scenario generation."
      - "Tiered erasure+BFT reconstruction admissibility checks."
  plan:
    steps:
      - "Implement replay/recovery receipt generation and validation contracts."
      - "Add cross-window replay idempotency monotonicity checks."
      - "Add retry/restart and partition/rejoin negatives for duplicate-authority effects."
      - "Capture replay/recovery convergence evidence artifacts."
  definition_of_done:
    evidence_ids:
      - "EVID-0005"
    criteria:
      - "Replay/recovery receipts are HTF-bound and signature-verifiable."
      - "Duplicate authoritative effects are denied across retries and replays."
      - "Unknown or stale replay/recovery evidence fails closed."
  notes:
    security: |
      Replay closure must preserve revocation and dedup invariants under all retry paths.
    verification: |
      Include partition/rejoin negatives proving no duplicate authoritative effects.
    general: |
      This ticket closes REQ-0005 bounded replay/recovery contracts.
