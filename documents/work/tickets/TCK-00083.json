{
  "schema": "apm2.ticket.v1",
  "ticket_meta": {
    "schema_version": "2026-01-25",
    "template_version": "2026-01-25",
    "ticket": {
      "id": "TCK-00083",
      "title": "Document local vs CI build settings"
    },
    "binds": {
      "prd_id": "NONE",
      "rfc_id": "RFC-0007",
      "requirements": [
        {
          "requirement_id": "PERF-004",
          "requirement_ref": "documents/rfcs/RFC-0007/01_problem_and_imports.yaml#rfc_local_requirements.requirements[3]"
        },
        {
          "requirement_id": "PERF-005",
          "requirement_ref": "documents/rfcs/RFC-0007/01_problem_and_imports.yaml#rfc_local_requirements.requirements[4]"
        }
      ],
      "evidence_artifacts": [
        "EVID-7004"
      ]
    },
    "custody": {
      "agent_roles": [
        "AGENT_IMPLEMENTER"
      ],
      "responsibility_domains": [
        "DOMAIN_DEVELOPER_EXPERIENCE"
      ]
    },
    "dependencies": {
      "tickets": [
        "TCK-00080"
      ]
    },
    "scope": {
      "in_scope": [
        "Add section explaining CI vs local build settings to CONTRIBUTING.md",
        "Explain CARGO_INCREMENTAL=0 in CI (for reproducibility)",
        "Recommend CARGO_INCREMENTAL=1 locally (for speed)",
        "Provide complete shell profile snippet",
        "Include warning about not copying CI settings blindly",
        "Explain the rationale for different settings"
      ],
      "out_of_scope": [
        "Modifying CI workflow",
        "Creating automated setup scripts",
        "cargo xtask setup-dev command"
      ]
    },
    "plan": {
      "steps": [
        "Read current CONTRIBUTING.md structure (after TCK-00081, TCK-00082)",
        "Add '### Local Development Settings' subsection",
        "Explain that CI and local dev have different optimization goals",
        "Document CARGO_INCREMENTAL difference (CI=0, local=1)",
        "Add warning about not copying CI environment settings",
        "Provide complete shell profile snippet combining all settings",
        "Ensure snippet is copy-pasteable",
        "Verify documentation is accurate and clear"
      ]
    },
    "definition_of_done": {
      "evidence_ids": [
        "EVID-7004"
      ],
      "criteria": [
        "CONTRIBUTING.md explains CI vs local build settings",
        "CARGO_INCREMENTAL difference is documented",
        "Warning about CI settings is present",
        "Shell profile snippet is provided",
        "Snippet includes RUSTC_WRAPPER and CARGO_INCREMENTAL",
        "Snippet is copy-pasteable",
        "Rationale for different settings is explained"
      ]
    },
    "notes": {
      "security": "No security implications. These are build optimization settings that\naffect compilation speed and reproducibility, not security.\n",
      "implementation_details": "Documentation content to add:\n\n```markdown\n### Local Development Settings\n\nCI and local development have different optimization goals:\n- **CI:** Reproducibility and cache correctness (CARGO_INCREMENTAL=0)\n- **Local:** Build speed (CARGO_INCREMENTAL=1)\n\n> **Warning:** Do not copy CI environment settings (from `.github/workflows/ci.yml`)\n> to your local development environment. CI settings are optimized for\n> reproducibility, not speed.\n\n**Recommended shell profile settings:**\n\nAdd to your `~/.bashrc`, `~/.zshrc`, or `~/.profile`:\n```bash\n# Rust build optimization for apm2 development\n# Requires: cargo install sccache\nexport RUSTC_WRAPPER=sccache    # Shared compilation cache\nexport CARGO_INCREMENTAL=1       # Enable incremental compilation (explicit)\n```\n\nAfter adding, reload your shell: `source ~/.bashrc` (or restart terminal)\n\n**Why these differ from CI:**\n- `CARGO_INCREMENTAL=0` in CI ensures builds are reproducible and\n  cache artifacts are correct across different CI runs\n- `CARGO_INCREMENTAL=1` locally enables incremental compilation,\n  which significantly speeds up rebuild times after small changes\n```\n",
      "affected_files": "Modified: CONTRIBUTING.md (add local development settings documentation)\n"
    }
  }
}
