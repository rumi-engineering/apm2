ticket_meta:
  schema_version: "2026-01-26"
  template_version: "2026-01-26"
  ticket:
    id: "TCK-00125"
    title: "Implement determinism checks and environment pinning for AAT"
  binds:
    prd_id: "PRD-0003"
    rfc_id: "RFC-0004"
    requirements:
      - requirement_id: "REQ-0009"
        requirement_ref: "documents/prds/PRD-0003/requirements/REQ-0009.yaml#prd_requirement"
    evidence_artifacts:
      - "EVID-0003"
      - "EVID-0006"
  custody:
    agent_roles:
      - "AGENT_IMPLEMENTER"
    responsibility_domains:
      - "DOMAIN_TOOLING"
      - "DOMAIN_BUILD_RELEASE"
  dependencies:
    tickets:
      - "TCK-00054"
  scope:
    in_scope:
      - "Enforce fixed random seeds in AAT randomized operations"
      - "Disallow network access during AAT execution (sandbox enforcement)"
      - "Pin AAT dependencies in evidence bundle"
      - "Verify re-run consistency: same commit -> same verdict"
      - "Capture environment snapshot (OS, tool versions) in evidence"
    out_of_scope:
      - "Global project-wide network blocking (AAT session only)"
  plan:
    steps:
      - "Add 'DeterminismGuard' to AAT execution wrapper"
      - "Use seccomp or similar to block socket() calls if not permitted"
      - "Collect sysinfo and tool versions for EvidenceBundle"
      - "Implement verdict comparison logic for re-runs"
  definition_of_done:
    evidence_ids:
      - "EVID-0006"
    criteria:
      - "AAT verdict is identical across 3 consecutive runs on same commit"
      - "Evidence bundle contains comprehensive environment snapshot"
      - "Network access attempt during AAT triggers failure"
  notes:
    security: "Enforcing network isolation is a core security requirement for AAT"
