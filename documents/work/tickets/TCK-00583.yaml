ticket_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  ticket:
    id: "TCK-00583"
    title: "Receipt/index compaction + GC: prune old index buckets, rebuild deterministically, and emit compaction receipts"
    status: "OPEN"
  binds:
    prd_id: "PRD-PLACEHOLDER"
    rfc_id: "RFC-0019"
    requirements: []
    evidence_artifacts: []
  custody:
    agent_roles: ["AGENT_IMPLEMENTER"]
    responsibility_domains: ["DOMAIN_RUNTIME"]
  dependencies:
    tickets:
      - ticket_id: "TCK-00560"
        reason: "Receipt index exists."
      - ticket_id: "TCK-00524"
        reason: "GC exists."
  scope:
    in_scope:
      - "Implement policies for index retention (not receipt retention)."
      - "Allow pruning old time buckets and rebuilding from receipts as needed."
      - "Integrate with `apm2 fac gc` escalation as a low-impact step."
      - "Emit `IndexCompactionReceiptV1`."
    out_of_scope:
      - "Deleting receipts as routine GC (forbidden by default)."
  plan:
    steps:
      - "Define index bucket layout and compaction rules."
      - "Implement prune/rebuild and receipts."
  definition_of_done:
    evidence_ids: []
    criteria:
      - "Index remains bounded in disk usage without sacrificing correctness (rebuildable)."
