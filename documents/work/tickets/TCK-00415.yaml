ticket_meta:
  schema_version: "2026-01-29"
  template_version: "2026-01-29"
  ticket:
    id: "TCK-00415"
    title: "WorkObject ledger authority cutover: filesystem ticket exit and projection-only truth"
    status: "CLOSED"
  binds:
    prd_id: "PRD-0009"
    rfc_id: "RFC-0018"
    requirements:
      - requirement_id: "REQ-HEF-0012"
        requirement_ref: "documents/rfcs/RFC-0018/requirements/REQ-HEF-0012.yaml#rfc_requirement"
    evidence_artifacts:
      - evidence_id: "EVID-HEF-0013"
        artifact_ref: "documents/rfcs/RFC-0018/evidence_artifacts/EVID-HEF-0013.yaml#rfc_evidence_artifact"
  custody:
    agent_roles:
      - "AGENT_IMPLEMENTER"
      - "AGENT_REVIEWER"
    responsibility_domains:
      - "DOMAIN_RUNTIME"
      - "DOMAIN_DATA"
      - "DOMAIN_DAEMON"
  dependencies:
    tickets:
      - ticket_id: "TCK-00310"
        reason: "ChangeSetBundle and ChangeSetPublished are prerequisite truth anchors."
      - ticket_id: "TCK-00313"
        reason: "FAC v0 E2E path must exist before cutover validation."
      - ticket_id: "TCK-00412"
        reason: "PublishChangeSet fail-closed baseline is required for authoritative runtime cutover."
  scope:
    in_scope:
      - "Introduce/validate WorkObject projection authority path for claim/status/transition lifecycle reads."
      - "Remove runtime reads of documents/work/tickets for authoritative decisions."
      - "Ensure work graph ordering/claimability derives from ledger+CAS only."
      - "Add replay rebuild path proving identical projection state after restart."
    out_of_scope:
      - "Instruction-plane cutover (handled by TCK-00419)."
      - "Event-family parity adapters (handled by TCK-00417)."
  plan:
    steps:
      - "Route runtime lifecycle read surfaces to projection-backed WorkObject state."
      - "Add explicit guards/tests failing any filesystem-ticket authority read path."
      - "Implement replay rebuild checks and deterministic projection assertions."
      - "Collect evidence for projection-only truth under concurrency/restart."
      - "Run cargo fmt --all && cargo clippy --workspace --all-targets --all-features -- -D warnings && cargo test --workspace."
  definition_of_done:
    evidence_ids:
      - "EVID-HEF-0013"
    criteria:
      - "No runtime lifecycle authority path reads filesystem tickets."
      - "Projection rebuild from ledger+CAS converges deterministically."
      - "Claim/Status APIs are projection-only for authority decisions."
  notes:
    security: |
      Runtime truth must be ledger/CAS only; filesystem state is non-authoritative.
    verification: |
      Include restart/replay and concurrency scenarios proving no dual-truth behavior.
